<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="https://Alrxu.github.io/page/3/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    
  
  <link rel="stylesheet" href="/Alrxu.github.io/css/style.css">
  

</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    
    <div id="header-inner" class="inner">
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://Alrxu.github.io"></form>
      </div>
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/Alrxu.github.io/">首页</a>
        
          <a class="main-nav-link" href="/Alrxu.github.io/archives">归档</a>
        
          <a class="main-nav-link" href="/Alrxu.github.io/about">关于</a>
        
      </nav>
      
    </div>
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/Alrxu.github.io/" id="logo">Hexo</a>
      </h1>
      
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-css3盒子阴影和文字阴影" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/Alrxu.github.io/2018/08/27/css3盒子阴影和文字阴影/" class="article-date">
  <time datetime="2018-08-27T06:03:33.726Z" itemprop="datePublished">2018-08-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/Alrxu.github.io/2018/08/27/css3盒子阴影和文字阴影/">css3盒子模型和阴影</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h2 id="css3盒子模型"><a href="#css3盒子模型" class="headerlink" title="css3盒子模型"></a>css3盒子模型</h2><h3 id="css2盒子模型与css3盒子模型比较"><a href="#css2盒子模型与css3盒子模型比较" class="headerlink" title="css2盒子模型与css3盒子模型比较"></a>css2盒子模型与css3盒子模型比较</h3><ul>
<li><p>盒子有三个值</p>
<ul>
<li>width： 内容（content）宽度</li>
<li>padding：内边距</li>
<li>boder：边框</li>
<li>盒子显示在游览器上的实际宽度： width+padding+boder</li>
</ul>
</li>
<li><p>CSS3中的box-sizing</p>
<ul>
<li>在css3中增加了一个box-sizing的属性，将其值设为 boder-sizing，则盒子的宽度永远和width一样</li>
<li>会向内挤压content的空间</li>
<li>默认值是 content-sizing和css2的效果一样</li>
</ul>
</li>
</ul>
<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.content-box</span>&#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">box-sizing</span><span class="selector-pseudo">:content-box</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">-moz-box-sizing</span><span class="selector-pseudo">:content-box</span>;</span></span><br><span class="line"><span class="undefined">            width: 100px;</span></span><br><span class="line"><span class="undefined">            height: 100px;</span></span><br><span class="line"><span class="undefined">            padding: 20px;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">border</span>: 5<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#E6A43F</span>;</span></span><br><span class="line"><span class="undefined">            background: blue;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.border-box</span>&#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">box-sizing</span><span class="selector-pseudo">:border-box</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">-moz-box-sizing</span><span class="selector-pseudo">:border-box</span>;</span></span><br><span class="line"><span class="undefined">            width: 100px;</span></span><br><span class="line"><span class="undefined">            height: 100px;</span></span><br><span class="line"><span class="undefined">            padding: 20px;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">border</span>: 5<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#3DA3EF</span>;</span></span><br><span class="line"><span class="undefined">            background: yellow;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content-box"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"border-box"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="阴影"><a href="#阴影" class="headerlink" title="阴影"></a>阴影</h2><h3 id="文字阴影"><a href="#文字阴影" class="headerlink" title="文字阴影"></a>文字阴影</h3><ul>
<li>可以对文字设置阴影</li>
<li>text-shadow: 5px 10px 8px red;<ul>
<li>5px: 阴影的水平x方向偏移</li>
<li>10px: 阴影的垂直y方向的偏移</li>
<li>8px：代表阴影的模糊程度，值越大，代表阴影越模糊</li>
<li>red： 阴影的颜色</li>
</ul>
</li>
<li>也可以对文字设置多重阴影<ul>
<li>多个阴影之间用 <code>,</code> 隔开即可</li>
<li>text-shadow: 5px 10px 8px red, 7px 15px 8px blue;</li>
</ul>
</li>
</ul>
<h3 id="盒子阴影"><a href="#盒子阴影" class="headerlink" title="盒子阴影"></a>盒子阴影</h3><ul>
<li>盒子阴影的参数说明</li>
<li>盒子阴影与文字阴影的设置大体相同</li>
<li>box-shadow: 5px 6px 7px 8px red inset;<ul>
<li>5px: 水平偏移</li>
<li>6px：垂直偏移</li>
<li>7px：模糊程度</li>
<li>8px: 阴影向所有方向放大或缩小（极少用）</li>
<li>inset 要么不写，要么写inset，没有outset值，写了会报错， 如果设了inset会出现内阴影</li>
</ul>
</li>
</ul>
<h3 id="内阴影的实现技巧"><a href="#内阴影的实现技巧" class="headerlink" title="内阴影的实现技巧"></a>内阴影的实现技巧</h3><ul>
<li><ol>
<li>比如需求是左下有内阴影</li>
</ol>
</li>
<li><ol start="2">
<li>就先设置反方向（右上）的外阴影</li>
</ol>
</li>
<li><ol start="3">
<li>阴影方向设为inset<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;!<span class="selector-tag">DOCTYPE</span> <span class="selector-tag">html</span>&gt;</span><br><span class="line">&lt;html lang="en"&gt;</span><br><span class="line">&lt;<span class="selector-tag">head</span>&gt;</span><br><span class="line">    &lt;title&gt;&lt;/title&gt;</span><br><span class="line">    &lt;meta charset="UTF-8"&gt;</span><br><span class="line">    &lt;<span class="selector-tag">style</span>&gt;</span><br><span class="line">        <span class="selector-class">.box</span> &#123;</span><br><span class="line">            <span class="attribute">margin</span>: <span class="number">100px</span> auto;</span><br><span class="line">            <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">            <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">            <span class="attribute">background-color</span>: yellowgreen;</span><br><span class="line">            <span class="attribute">box-shadow</span>: <span class="number">10px</span> -<span class="number">10px</span> <span class="number">10px</span> <span class="number">0px</span> red inset;            </span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line">    &lt;div class="box"&gt;&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://Alrxu.github.io/2018/08/27/css3盒子阴影和文字阴影/" data-id="cjn9v9vwb0006v86xk31jpsy1" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>
 


  
    <article id="post-css3介绍和transition过渡" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/Alrxu.github.io/2018/08/25/css3介绍和transition过渡/" class="article-date">
  <time datetime="2018-08-25T05:59:52.382Z" itemprop="datePublished">2018-08-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/Alrxu.github.io/2018/08/25/css3介绍和transition过渡/">CSS3介绍和transition过渡</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h2 id="CSS3-介绍"><a href="#CSS3-介绍" class="headerlink" title="CSS3 介绍"></a>CSS3 介绍</h2><h3 id="CSS3的新特性"><a href="#CSS3的新特性" class="headerlink" title="CSS3的新特性"></a>CSS3的新特性</h3><ul>
<li>更强大的选择器</li>
<li>更丰富的样式</li>
<li>媲美jquery的动画效果（很多动画不再需要使用js来实现，css就可以搞定了）</li>
<li>适应不同屏幕大小的弹性布局</li>
</ul>
<h3 id="伪类选择器（befor，-after）"><a href="#伪类选择器（befor，-after）" class="headerlink" title="伪类选择器（befor， after）"></a>伪类选择器（befor， after）</h3><ul>
<li>所谓伪，就是在html中没有写，在css中却直接用了，在开发工具中也看不到</li>
<li>:before 永远添加在选中的元素最前面，有且只有一个</li>
<li>:after 永远添加在在选中元素的最后面，有且只有一个</li>
<li>before和after必须设置content属性，不然无法显示</li>
<li>before和after需要手动指定其display属性</li>
</ul>
<h3 id="伪类选择器解决浮动的问题"><a href="#伪类选择器解决浮动的问题" class="headerlink" title="伪类选择器解决浮动的问题"></a>伪类选择器解决浮动的问题</h3><ul>
<li>已经学过的清除浮动的两种方式<ul>
<li>方式一：添加一个clear的子元素，设置clear: both;</li>
<li>方式二: 设置父元素的overflow：auto;</li>
</ul>
</li>
<li>例用::after清除浮动<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">            .box &#123;</span></span><br><span class="line"><span class="undefined">                /*第一种方式*/</span></span><br><span class="line"><span class="undefined">                background-color: wheat;</span></span><br><span class="line"><span class="undefined">                /*overflow: auto;*/</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">            /*第二种方式，使用clear*/</span></span><br><span class="line"><span class="undefined">            /*.clear &#123;</span></span><br><span class="line"><span class="undefined">                clear: both;</span></span><br><span class="line"><span class="undefined">            &#125;*/</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">            /*</span></span><br><span class="line"><span class="undefined">            第三种方式，使用伪元素</span></span><br><span class="line"><span class="undefined">            */</span></span><br><span class="line"><span class="undefined">            .box::after &#123;</span></span><br><span class="line"><span class="undefined">                content: "";</span></span><br><span class="line"><span class="undefined">                display: block;</span></span><br><span class="line"><span class="undefined">                clear:both;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">            .boxa &#123;</span></span><br><span class="line"><span class="undefined">                width: 100px;</span></span><br><span class="line"><span class="undefined">                height: 100px;</span></span><br><span class="line"><span class="undefined">                background-color: skyblue;</span></span><br><span class="line"><span class="undefined">                float: left;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">            .boxb &#123;</span></span><br><span class="line"><span class="undefined">                width: 150px;</span></span><br><span class="line"><span class="undefined">                height: 150px;</span></span><br><span class="line"><span class="undefined">                background-color: yellowgreen;</span></span><br><span class="line"><span class="undefined">                float: left;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">            .boxc &#123;</span></span><br><span class="line"><span class="undefined">                width: 200px;</span></span><br><span class="line"><span class="undefined">                height: 100px;</span></span><br><span class="line"><span class="undefined">                background-color: greenyellow;</span></span><br><span class="line"><span class="undefined">                float: left;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"boxa"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"boxb"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"boxc"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--方式一： &lt;div class="clear"&gt;&lt;/div&gt;--&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="transition过渡"><a href="#transition过渡" class="headerlink" title="transition过渡"></a>transition过渡</h2><h3 id="1-过渡是怎么回事"><a href="#1-过渡是怎么回事" class="headerlink" title="1. 过渡是怎么回事"></a>1. 过渡是怎么回事</h3><ul>
<li>假如某个css属性 P，它有一个初始值a，再设一个初始值b。指定P属性是可以过渡显示的，那么当P从a变到b时，会有一个动画的效果。</li>
<li><p>注意： 伪类的过渡会还原，非伪类元素动画执行完成后，会保存动画完成时的状态</p>
</li>
<li><p>transtion的几个属性： </p>
<ul>
<li>transition-property: 就是上面那个P，比如说你指定width发生变化， 就填width;</li>
<li>transition-duration: 动画的时间 多少秒 比如 1s</li>
<li>transition-timing-function: 动画执行的速度效果</li>
<li>transition-delay: 延迟几秒执行</li>
</ul>
</li>
</ul>
<h3 id="2-过渡的复合写法"><a href="#2-过渡的复合写法" class="headerlink" title="2. 过渡的复合写法"></a>2. 过渡的复合写法</h3><ol>
<li><p>某一个属性发生变化时，执行动画</p>
<ul>
<li>transition: width 1s linear 2s;</li>
<li>width: 指定元素的width发生变化时，发生动画</li>
<li>1s: 指定动画时长为1s</li>
<li>linear: 指定动画为匀速</li>
<li>2s: 指定延时两秒执行</li>
</ul>
</li>
<li><p>所有属性变化时， 都执行动画</p>
<ul>
<li>transition: all 1s linear;</li>
<li>all代表所有属性，只要发生变化都执行动画，时长都是1秒</li>
<li>但如果各个属性执行动画的时长不一样呢?</li>
</ul>
</li>
<li><p>几个属性变化时，各自执行动画</p>
<ul>
<li>transition: width 1s linear, height 1s ease 1s;</li>
<li>代表width和height都会动画，但各自有自己的动画的参数;</li>
</ul>
</li>
<li><p>多个属性动画，分开写（如果参数相同，可以合并）</p>
<ul>
<li>可以多个属性分开写  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">transition-property</span>: <span class="selector-tag">width</span>, <span class="selector-tag">height</span>;</span><br><span class="line"><span class="selector-tag">transition-duration</span>: 1<span class="selector-tag">s</span>; <span class="comment">/*代表都是执行一秒，合并了*/</span></span><br><span class="line"><span class="selector-tag">transition-timing-function</span>: <span class="selector-tag">ease</span>, <span class="selector-tag">ease-in</span>;</span><br><span class="line"><span class="selector-tag">transition-delay</span>: 2<span class="selector-tag">s</span>;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<h3 id="3-transtion支持的属性"><a href="#3-transtion支持的属性" class="headerlink" title="3. transtion支持的属性"></a>3. transtion支持的属性</h3><ul>
<li>transition-property是用来指定当元素其中一个属性改变时执行transition效果: 所支持的属性类型如下：<ul>
<li>color: 通过红、绿、蓝和透明度组件变换（每个数值处理）如：background-color,border-color,color,outline-color等css属性；</li>
<li>length: 真实的数  * 字 如：word-spacing,width,vertical-align,top,right,bottom,left,padding,outline-width,margin,min-width,min-height,max-width,max-height,line-height,height,border-width,border-spacing,background-position等属性；</li>
<li>percentage:真实的数字 如：word-spacing,width,vertical-align,top,right,bottom,left,padding,outline-width,margin,min-width,min-height,max-width,max-height,line-height,height,border-width,border-spacing,background-position等属性；</li>
<li>integer离散步骤（整个数字），在真实的数字空间，以及使用floor()转换为整数时发生 如：outline-offset,z-index等属性；</li>
<li>number真实的（浮点型）数值，如：zoom,opacity,font-weight,等属性；</li>
<li>transform list</li>
<li>rectangle:通过x, y, width 和 height（转为数值）变换，如：crop</li>
<li>visibility: 离散步骤，在0到1数字范围之内，0表示“隐藏”，1表示完全“显示”,如：visibility</li>
<li>shadow: 作用于color, x, y 和 blur（模糊）属性,如：text-shadow</li>
<li>gradient: 通过每次停止时的位置和颜色进行变化。它们必须有相同的类型（放射状的或是线性的）和相同的停止数值以便执行动画,如：background-image</li>
<li>paint server (SVG): 只支持下面的情况：从gradient到gradient以及color到color，然后工作与上面类似space-separated list of above:如果列表有相同的项目数值，则列表每一项按照上面的规则进行变化，否则无变化</li>
<li>a shorthand property: 如果缩写的所有部分都可以实现动画，则会像所有单个属性变化一样变化</li>
</ul>
</li>
</ul>
<h3 id="3-动画速度样式详解"><a href="#3-动画速度样式详解" class="headerlink" title="3. 动画速度样式详解"></a>3. 动画速度样式详解</h3><ul>
<li>linear： 线性过渡。等同于贝塞尔曲线(0.0, 0.0, 1.0, 1.0) </li>
<li>ease： 平滑过渡。等同于贝塞尔曲线(0.25, 0.1, 0.25, 1.0) </li>
<li>ease-in： 由慢到快。等同于贝塞尔曲线(0.42, 0, 1.0, 1.0) </li>
<li>ease-out： 由快到慢。等同于贝塞尔曲线(0, 0, 0.58, 1.0) </li>
<li>ease-in-out： 由慢到快再到慢。等同于贝塞尔曲线(0.42, 0, 0.58, 1.0) </li>
<li>step-start： 等同于 steps(1, start) </li>
<li>step-end： 等同于 steps(1, end) </li>
<li>steps(integer)： 分多少步完成</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://Alrxu.github.io/2018/08/25/css3介绍和transition过渡/" data-id="cjn9v9vvw0003v86xh9gii63s" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>
 


  
    <article id="post-封装、jQuery中的ajax" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/Alrxu.github.io/2018/08/21/封装、jQuery中的ajax/" class="article-date">
  <time datetime="2018-08-21T05:44:24.858Z" itemprop="datePublished">2018-08-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/Alrxu.github.io/2018/08/21/封装、jQuery中的ajax/">封装ajax、jQuery中的ajax</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h1 id="封装ajax、jQuery中的ajax"><a href="#封装ajax、jQuery中的ajax" class="headerlink" title="封装ajax、jQuery中的ajax"></a>封装ajax、jQuery中的ajax</h1><h2 id="1-封装ajax代码"><a href="#1-封装ajax代码" class="headerlink" title="1. 封装ajax代码"></a>1. 封装ajax代码</h2><ul>
<li>把函数都封装到一个对象里，作为对象的方法，即可解决这些函数名污染的问题</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myJq = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  params是一个对象</span></span><br><span class="line"><span class="comment">  params.type     请求类型</span></span><br><span class="line"><span class="comment">  params.url      请求网址</span></span><br><span class="line"><span class="comment">  params.data     请求参数</span></span><br><span class="line"><span class="comment">  params.success  回调函数</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">myJq.ajax = <span class="function"><span class="keyword">function</span>(<span class="params">params</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//1. 创建xhr</span></span><br><span class="line">    <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.1 判断是get还是post</span></span><br><span class="line">    <span class="keyword">if</span>(params.type == <span class="string">"get"</span>)&#123;</span><br><span class="line">        <span class="comment">// 拼接参数</span></span><br><span class="line">        params.url += <span class="string">"?"</span> + params.data;</span><br><span class="line">	    <span class="comment">// 设置请求行</span></span><br><span class="line">        xhr.open(params.type, params.url);</span><br><span class="line">    </span><br><span class="line">	    <span class="comment">//3. 发送请求</span></span><br><span class="line">        xhr.send(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line"></span><br><span class="line">	    <span class="comment">// 设置请求行</span></span><br><span class="line">        xhr.open(params.type, params.url);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//设置请求头</span></span><br><span class="line">        xhr.setRequestHeader(<span class="string">'Content-type'</span>,<span class="string">'application/x-www-form-urlencoded'</span>);</span><br><span class="line">    </span><br><span class="line">	    <span class="comment">//3. 发送请求</span></span><br><span class="line">        xhr.send(params.data);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//4. 拿到响应体</span></span><br><span class="line">    xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span>(xhr.readyState == <span class="number">4</span> &amp;&amp; xhr.status == <span class="number">200</span>)&#123;</span><br><span class="line"></span><br><span class="line">          <span class="comment">//转成JSON对象</span></span><br><span class="line">          <span class="keyword">var</span> json = <span class="built_in">JSON</span>.parse(xhr.responseText);</span><br><span class="line"></span><br><span class="line">          <span class="comment">//交给调用者处理</span></span><br><span class="line">          params.success(json);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-jQuery封装的ajax工具"><a href="#2-jQuery封装的ajax工具" class="headerlink" title="2. jQuery封装的ajax工具"></a>2. jQuery封装的ajax工具</h2><ul>
<li>jQuery是一个JS库：即一套用JS封装好的函数库</li>
<li>jQuery本身就已经封装好了方便程序员调用ajax的方法，功能比我们刚刚自己封装的更强大</li>
</ul>
<h3 id="2-1-ajax"><a href="#2-1-ajax" class="headerlink" title="2.1 $.ajax"></a>2.1 $.ajax</h3><ul>
<li>jQuery中用来发ajax请求的方法，跟封装的方法类似，但是功能更强大</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//传入一个对象</span></span><br><span class="line">$.ajax(&#123;</span><br><span class="line">    </span><br><span class="line">  <span class="comment">//请求网址</span></span><br><span class="line">  url: <span class="string">'./data.php'</span>,</span><br><span class="line">  <span class="comment">//请求类型</span></span><br><span class="line">  type: <span class="string">'post'</span>,</span><br><span class="line">  <span class="comment">//服务器响应数据类型，如果是跨域，可以改成jsonp</span></span><br><span class="line">  dataType: <span class="string">'json'</span>,</span><br><span class="line">  <span class="comment">//发送给服务器的数据（请求体）,如果是get请求数据写在url,如果是post才写data属性</span></span><br><span class="line">  data: &#123; <span class="attr">id</span>: <span class="number">1</span> &#125;,</span><br><span class="line">  <span class="comment">//回调函数：响应回来调用的函数</span></span><br><span class="line">  success: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//请求失败触发</span></span><br><span class="line">  error: <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">  &#125;</span><br><span class="line">    </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li><p>常用选项参数介绍：</p>
<ul>
<li><p>url：请求地址</p>
</li>
<li><p>type：请求方法，默认为 <code>get</code></p>
</li>
<li><p>dataType：服务端响应数据类型，一般只是在跨域时写jsonp，其他时候可以不写，自动根据响应头判断返回数据</p>
</li>
<li><p>data：需要传递到服务端的数据，如果 GET 则通过 URL 传递，如果 POST 则通过请求体传递</p>
</li>
<li><p>timeout：请求超时时间</p>
</li>
<li><p>success：请求成功之后触发</p>
</li>
<li><p>error：请求失败触发</p>
</li>
</ul>
</li>
</ul>
<ul>
<li>例子代码如下：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">    url:<span class="string">'http://api.douban.com/v2/movie/top250'</span>,</span><br><span class="line">    type:<span class="string">'get'</span>,</span><br><span class="line">    dataType:<span class="string">'jsonp'</span>,</span><br><span class="line">    success:<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(data);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>使用$.ajax方法有个不太方便的地方是：每次要指定type属性，即请求的类型</p>
</blockquote>
<h3 id="2-2-get"><a href="#2-2-get" class="headerlink" title="2.2 $.get"></a>2.2 $.get</h3><ul>
<li>专门用来只做  <code>get</code>  请求的方法，参数与 <code>ajax</code> 方法一样，只是不用写 <code>type</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$.get(&#123;</span><br><span class="line">    url:<span class="string">'http://api.douban.com/v2/movie/top250'</span>,</span><br><span class="line">    dataType:<span class="string">'jsonp'</span>,</span><br><span class="line">    success:<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(data);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li>或者可以不传对象，传四个参数<ul>
<li>参数1：请求url</li>
<li>参数2：要传递给服务器的数据（如果不传数据可以不写此参数）</li>
<li>参数3：回调函数，函数的第一个参数是服务器返回的数据</li>
<li>参数4：dataType，返回的数据格式</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$.get(<span class="string">'http://api.douban.com/v2/movie/top250'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'data'</span>);</span><br><span class="line">    </span><br><span class="line">&#125;,<span class="string">'jsonp'</span>)</span><br></pre></td></tr></table></figure>
<h3 id="2-3-post"><a href="#2-3-post" class="headerlink" title="2.3 $.post"></a>2.3 $.post</h3><ul>
<li>专门用来只做  <code>post</code>  请求的方法，参数与 <code>ajax</code> 方法一样，只是不用写 <code>type</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$.post(&#123;</span><br><span class="line">    url:<span class="string">'./data.php'</span>,</span><br><span class="line">    <span class="comment">//传字符串</span></span><br><span class="line">    data:<span class="string">"name=jack&amp;pwd=123"</span>,</span><br><span class="line">    success:<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(data);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li>此方法要给服务器传递数据时，需要写  <code>data</code>  属性，属性值可以是  <code>&quot;name=jack&amp;pwd=123&quot;</code>  这样的字符串，也可以是对象， 代码如下：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$.post(&#123;</span><br><span class="line">    url:<span class="string">'./data.php'</span>,</span><br><span class="line">    <span class="comment">//传对象</span></span><br><span class="line">    data:&#123; <span class="attr">name</span>:<span class="string">"jack"</span>, <span class="attr">pwd</span>:<span class="number">123</span> &#125;,</span><br><span class="line">    success:<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(data);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>或者可以不传对象，传四个参数</p>
<ul>
<li>参数1：请求url</li>
<li>参数2：要传递给服务器的数据（如果不传数据可以不写此参数）</li>
<li>参数3：回调函数，函数的第一个参数是服务器返回的数据</li>
<li>参数4：dataType，返回的数据格式</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$.get(<span class="string">'http://api.douban.com/v2/movie/top250'</span>,</span><br><span class="line">      &#123;<span class="attr">name</span>:<span class="string">"jack"</span>, <span class="attr">pwd</span>:<span class="number">123</span>&#125;,</span><br><span class="line">      <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">    	<span class="built_in">console</span>.log(<span class="string">'data'</span>);</span><br><span class="line">       &#125;,</span><br><span class="line">      <span class="string">'jsonp'</span>);</span><br></pre></td></tr></table></figure>
<h2 id="3-jQuery中关于ajax部分的补充"><a href="#3-jQuery中关于ajax部分的补充" class="headerlink" title="3. jQuery中关于ajax部分的补充"></a>3. jQuery中关于ajax部分的补充</h2><h3 id="3-1-serialize方法"><a href="#3-1-serialize方法" class="headerlink" title="3.1 serialize方法"></a>3.1 serialize方法</h3><ul>
<li>根据刚刚的注册案例得知，我们需要在一个表单中提交所有数据时，需要一个一个取出元素的值，很不方便</li>
<li>serialize方法可以让我们一下子获得表单中的值，并拼接成字符串形式</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sendData = $(<span class="string">'#ajaxForm'</span>).serialize();</span><br><span class="line"><span class="built_in">console</span>.log(sendData);</span><br></pre></td></tr></table></figure>
<ul>
<li><p>结果：</p>
<p><img src="/2018/08/21/封装、jQuery中的ajax/../alrxu/1524645682971.png" alt=""></p>
<blockquote>
<p>注意：只有表单里加了 name属性的，通过serialize方法可以把它取到值作为参数，没加name属性的不会取到。</p>
</blockquote>
</li>
</ul>
<h3 id="3-2-jQuery中ajax的全局方法"><a href="#3-2-jQuery中ajax的全局方法" class="headerlink" title="3.2 jQuery中ajax的全局方法"></a>3.2 jQuery中ajax的全局方法</h3><h4 id="3-2-1-ajaxSetup"><a href="#3-2-1-ajaxSetup" class="headerlink" title="3.2.1 ajaxSetup"></a>3.2.1 ajaxSetup</h4><ul>
<li>ajax默认设置方法。可以设置一些jQuery中的ajax请求的默认参数</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$.ajaxSetup(&#123;</span><br><span class="line">  url: <span class="string">"http://www.zll.com"</span>,</span><br><span class="line">  type: <span class="string">"POST"</span>,</span><br><span class="line">  data:&#123; <span class="attr">name</span>:<span class="string">"jack"</span>,<span class="attr">age</span>:<span class="number">16</span> &#125;</span><br><span class="line">  ......</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<ul>
<li>说明：<ul>
<li>当这么设置后，再用jQuery发ajax请求时，如果不指定url,type和data，那么将自动把url变为<a href="http://www.zll.com，发送类型为post，数据为jack,16的这个对象。" target="_blank" rel="noopener">www.zll.com，发送类型为post，数据为jack,16的这个对象。</a></li>
</ul>
</li>
</ul>
<p>例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">   $.ajaxSetup(&#123;</span><br><span class="line">       url: <span class="string">"http://api.douban.com/v2/movie/top250"</span>,</span><br><span class="line">       type: <span class="string">"POST"</span>,</span><br><span class="line">       data: &#123; <span class="attr">name</span>: <span class="string">"jack"</span>, <span class="attr">age</span>: <span class="number">16</span> &#125;</span><br><span class="line">   &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//如果没有设置url，会自动按全局默认设置的url来</span></span><br><span class="line">   $.ajax(&#123;</span><br><span class="line">       dataType:<span class="string">'jsonp'</span>,</span><br><span class="line">       success: <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">           <span class="built_in">console</span>.log(data);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;)</span><br></pre></td></tr></table></figure>
<p><img src="/2018/08/21/封装、jQuery中的ajax/../alrxu/1524646937255.png" alt=""></p>
<h4 id="3-2-2-ajaxStart"><a href="#3-2-2-ajaxStart" class="headerlink" title="3.2.2 ajaxStart"></a>3.2.2 ajaxStart</h4><ul>
<li>当全局有任意一次jQuery做的ajax请求发起时调用的方法</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ajaxStart(<span class="function"><span class="keyword">function</span> (<span class="params">xhr</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 全局有任意一次 AJAX 请求开始（必须是 jQuery 发起的请求）</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'有请求了'</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h4 id="3-2-3-ajaxStop"><a href="#3-2-3-ajaxStop" class="headerlink" title="3.2.3 ajaxStop"></a>3.2.3 ajaxStop</h4><ul>
<li>当全局有任意一次jQuery做的ajax请求结束时调用的方法</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ajaxStop(<span class="function"><span class="keyword">function</span> (<span class="params">xhr</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 全局有任意一次 AJAX 请求结束（必须是 jQuery 发起的请求）</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'请求结束了'</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>更多jQuery中的ajax方法，可查阅</p>
<p><a href="http://www.w3school.com.cn/jquery/jquery_ref_ajax.asp" target="_blank" rel="noopener">http://www.w3school.com.cn/jquery/jquery_ref_ajax.asp</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://Alrxu.github.io/2018/08/21/封装、jQuery中的ajax/" data-id="cjn9v9vxg000fv86xdyh5412n" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>
 


  
    <article id="post-模板引擎、跨域、JSONP" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/Alrxu.github.io/2018/08/19/模板引擎、跨域、JSONP/" class="article-date">
  <time datetime="2018-08-19T05:36:50.544Z" itemprop="datePublished">2018-08-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/Alrxu.github.io/2018/08/19/模板引擎、跨域、JSONP/">Ajax_模板引擎、同源&amp;跨域</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h1 id="模板引擎、同源-amp-跨域"><a href="#模板引擎、同源-amp-跨域" class="headerlink" title="模板引擎、同源&amp;跨域"></a>模板引擎、同源&amp;跨域</h1><h2 id="1-JSON模板引擎–artTemplate"><a href="#1-JSON模板引擎–artTemplate" class="headerlink" title="1. JSON模板引擎–artTemplate"></a>1. JSON模板引擎–artTemplate</h2><blockquote>
<p>简介：其实就是预先写好html结构代码，然后调用模板引擎第三方库，会自动把数据填充到这个html里</p>
<p>用artTemplate这款模板框架，下载地址：<a href="https://aui.github.io/art-template/zh-cn/docs/installation.html" target="_blank" rel="noopener">https://aui.github.io/art-template/zh-cn/docs/installation.html</a></p>
</blockquote>
<h3 id="1-1-基本使用"><a href="#1-1-基本使用" class="headerlink" title="1.1 基本使用"></a>1.1 基本使用</h3><h4 id="1-1-1-准备一个模板"><a href="#1-1-1-准备一个模板" class="headerlink" title="1.1.1 准备一个模板"></a>1.1.1 准备一个模板</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"xxxx"</span> <span class="attr">id</span>=<span class="string">"tpl"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>我叫<span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">name</span> %&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>，今年<span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">age</span> %&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>岁了，我在<span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">school</span> %&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>学习前端。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>说明：<ul>
<li>要用script标签，必须给type属性，但是值可以随便写，只要不是  <code>text/javascript</code>  就可以</li>
<li>必须要给这个script标签加  <code>id</code>  ，因为后面需要找到标签内的模板</li>
<li>模板里就是未来想显示的html代码，只是里面有些值不能写死，要根据json数据来填充，所以把不写死的数据用  <code>&lt;%= 属性名 %&gt;</code>  包起来</li>
</ul>
</li>
</ul>
<h4 id="1-1-2-导入框架"><a href="#1-1-2-导入框架" class="headerlink" title="1.1.2 导入框架"></a>1.1.2 导入框架</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./template-web.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="1-1-3-填充模板"><a href="#1-1-3-填充模板" class="headerlink" title="1.1.3 填充模板"></a>1.1.3 填充模板</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//JSON字符串转化为对象</span></span><br><span class="line"><span class="keyword">var</span> obj = <span class="built_in">JSON</span>.parse(xhr.responseText);</span><br><span class="line"></span><br><span class="line"><span class="comment">//找到tpl，并用obj对象填充,填充后的结果是一段html代码</span></span><br><span class="line"><span class="keyword">var</span> html = template(<span class="string">'tpl'</span>,obj);</span><br><span class="line"></span><br><span class="line"><span class="comment">//打印看结果</span></span><br><span class="line"><span class="built_in">console</span>.log(html);</span><br></pre></td></tr></table></figure>
<p>打印结果为：</p>
<p><img src="/2018/08/19/模板引擎、跨域、JSONP/alrxu/1524126666272.png" alt=""></p>
<ul>
<li>可以看到，当用了模板引擎后，会自动把JSON对应的属性值，填充到模板中同样属性名的地方，</li>
</ul>
<h3 id="1-2-用模板填充JSON数组"><a href="#1-2-用模板填充JSON数组" class="headerlink" title="1.2 用模板填充JSON数组"></a>1.2 用模板填充JSON数组</h3><h4 id="1-2-1-准备模板"><a href="#1-2-1-准备模板" class="headerlink" title="1.2.1 准备模板"></a>1.2.1 准备模板</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/html"</span> <span class="attr">id</span>=<span class="string">"tpl"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">    &lt;!-- list是我们自己起的虚拟数组名</span></span><br><span class="line"><span class="undefined">        到时json数据一拿到，把json数组赋值给这个list</span></span><br><span class="line"><span class="javascript">        就能自动把<span class="built_in">JSON</span>数组每条数据都遍历成tr显示了</span></span><br><span class="line"><span class="undefined">     --&gt;</span></span><br><span class="line"><span class="javascript">    &lt;% <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>;i &lt; list.length; i++)&#123; %&gt;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">list</span>[<span class="attr">i</span>]['<span class="attr">Id</span>'] %&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">list</span>[<span class="attr">i</span>]['<span class="attr">name</span>'] %&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">list</span>[<span class="attr">i</span>]['<span class="attr">age</span>'] %&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">list</span>[<span class="attr">i</span>]['<span class="attr">score</span>'] %&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%</span> &#125; %&gt;</span></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>说明：list这个名字可以随便起，用模板填充时，把真实JSON数组传递给list就可以填充了</li>
<li>​</li>
</ul>
<h4 id="1-2-2-导入框架（跟基本使用一样，略）"><a href="#1-2-2-导入框架（跟基本使用一样，略）" class="headerlink" title="1.2.2 导入框架（跟基本使用一样，略）"></a>1.2.2 导入框架（跟基本使用一样，略）</h4><h4 id="1-2-3-填充模板"><a href="#1-2-3-填充模板" class="headerlink" title="1.2.3 填充模板"></a>1.2.3 填充模板</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> data = <span class="built_in">JSON</span>.parse(xhr.responseText);</span><br><span class="line"><span class="comment">//参数2：list:data  意思是把data这个真实的JSON数组替换掉模板里的list值</span></span><br><span class="line"><span class="keyword">var</span> html = template(<span class="string">'tpl'</span>, &#123; <span class="attr">list</span>: data &#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">'tbody'</span>).innerHTML = html;</span><br></pre></td></tr></table></figure>
<ul>
<li>注意：模板里的数组叫list,那么参数2也叫list，要注意别写错。</li>
</ul>
<h3 id="1-3-使用框架内置的遍历语法"><a href="#1-3-使用框架内置的遍历语法" class="headerlink" title="1.3 使用框架内置的遍历语法"></a>1.3 使用框架内置的遍历语法</h3><h4 id="1-3-1-语法："><a href="#1-3-1-语法：" class="headerlink" title="1.3.1 语法："></a>1.3.1 语法：</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;each list value key&#125;&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>说明：<ul>
<li>list是自己定义的虚拟数组或对象，使用模板时用真实JSON数组或对象替换</li>
<li>如果list是对象，那么value就是属性值，如果list是数组，那么value得到的就是元素</li>
<li>如果list是对象，那么key就是属性名，如果list是数组，那么key就是下标</li>
</ul>
</li>
</ul>
<p>例：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/html"</span> <span class="attr">id</span>=<span class="string">"tpl"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined"> </span></span><br><span class="line"><span class="undefined">     &#123;&#123;each list value key&#125;&#125;</span></span><br><span class="line"><span class="xml">     <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="xml">         <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;value.Id&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="xml">         <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;value.name&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="xml">         <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;value.age&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="xml">         <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;value.score&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="xml">     <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="undefined">     &#123;&#123;/each&#125;&#125;</span></span><br><span class="line"><span class="undefined"> </span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="1-3-2-调用模板"><a href="#1-3-2-调用模板" class="headerlink" title="1.3.2 调用模板"></a>1.3.2 调用模板</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//把报文转换为JSON数组</span></span><br><span class="line"><span class="keyword">var</span> data = <span class="built_in">JSON</span>.parse(xhr.responseText);</span><br><span class="line"><span class="comment">//使用模板替换</span></span><br><span class="line"><span class="keyword">var</span> html = template(<span class="string">'tpl'</span>, &#123; <span class="attr">list</span>: data &#125;);</span><br><span class="line"><span class="comment">//替换后的内容放到网页</span></span><br><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">'tbody'</span>).innerHTML = html;</span><br></pre></td></tr></table></figure>
<h4 id="1-3-3-图解："><a href="#1-3-3-图解：" class="headerlink" title="1.3.3 图解："></a>1.3.3 图解：</h4><p><img src="/2018/08/19/模板引擎、跨域、JSONP/alrxu/1524129890980.png" alt=""></p>
<h2 id="2-同源-amp-跨域"><a href="#2-同源-amp-跨域" class="headerlink" title="2. 同源&amp;跨域"></a>2. 同源&amp;跨域</h2><h3 id="2-1-名词解释"><a href="#2-1-名词解释" class="headerlink" title="2.1 名词解释"></a>2.1 名词解释</h3><ul>
<li>同源：<ul>
<li>协议头、域名、端口完全一致就叫同源</li>
</ul>
</li>
<li>跨域：<ul>
<li>协议头、域名、端口有一个不一样就叫跨域</li>
</ul>
</li>
<li>判断是否同源，如下：</li>
</ul>
<p>如：<a href="http://www.example.com/detail.html" target="_blank" rel="noopener">http://www.example.com/detail.html</a> 与以下地址对比</p>
<table>
<thead>
<tr>
<th>对比地址</th>
<th>是否同源</th>
<th>原因</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="http://api.example.com/detail.html" target="_blank" rel="noopener">http://api.example.com/detail.html</a></td>
<td>不同源</td>
<td>域名不同</td>
</tr>
<tr>
<td><a href="https://www.example.com/detail.html" target="_blank" rel="noopener">https://www.example.com/detail.html</a></td>
<td>不同源</td>
<td>协议不同</td>
</tr>
<tr>
<td><a href="http://www.example.com:8080/detail.html" target="_blank" rel="noopener">http://www.example.com:8080/detail.html</a></td>
<td>不同源</td>
<td>端口不同</td>
</tr>
<tr>
<td><a href="http://api.example.com:8080/detail.html" target="_blank" rel="noopener">http://api.example.com:8080/detail.html</a></td>
<td>不同源</td>
<td>域名、端口不同</td>
</tr>
<tr>
<td><a href="https://api.example.com/detail.html" target="_blank" rel="noopener">https://api.example.com/detail.html</a></td>
<td>不同源</td>
<td>协议、域名不同</td>
</tr>
<tr>
<td><a href="https://www.example.com:8080/detail.html" target="_blank" rel="noopener">https://www.example.com:8080/detail.html</a></td>
<td>不同源</td>
<td>端口、协议不同</td>
</tr>
<tr>
<td><a href="http://www.example.com/other.html" target="_blank" rel="noopener">http://www.example.com/other.html</a></td>
<td>同源</td>
<td>只是目录不同</td>
</tr>
</tbody>
</table>
<h3 id="2-2-跨域的影响"><a href="#2-2-跨域的影响" class="headerlink" title="2.2 跨域的影响"></a>2.2 跨域的影响</h3><ul>
<li>注：根据同源和跨域的意思，以后讲  <code>跨域</code>  就是指  <code>不同源</code></li>
<li>如果要在  <code>localhost/test.html</code>  这个网站上访问  <code>http://api.douban.com/v2/movie/top250</code> 这个接口，那么浏览器会出现以下错误：</li>
</ul>
<p><img src="/2018/08/19/模板引擎、跨域、JSONP/alrxu/1524476169312.png" alt=""></p>
<blockquote>
<p>原因：浏览器本身从安全角度考虑，不支持<strong>跨域</strong>访问</p>
</blockquote>
<h2 id="3-JSONP"><a href="#3-JSONP" class="headerlink" title="3. JSONP"></a>3. JSONP</h2><h3 id="3-1-研究如何突破跨域请求限制"><a href="#3-1-研究如何突破跨域请求限制" class="headerlink" title="3.1 研究如何突破跨域请求限制"></a>3.1 研究如何突破跨域请求限制</h3><h4 id="3-1-1-使用img标签（拿不到响应体）"><a href="#3-1-1-使用img标签（拿不到响应体）" class="headerlink" title="3.1.1 使用img标签（拿不到响应体）"></a>3.1.1 使用img标签（拿不到响应体）</h4><ul>
<li>我们知道：<code>img</code> 标签，有个 <code>href</code> 属性，这个属性其实也是向服务器发送请求，我们看看这种方式是否可以跨越访问，代码如下：</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">href</span>=<span class="string">"http://api.douban.com/v2/movie/top250"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>此时可以看到能正确收到响应，但拿不到响应体（返回的JSON数据），如图：</li>
</ul>
<p><img src="/2018/08/19/模板引擎、跨域、JSONP/alrxu/1524476795561.png" alt=""></p>
<h4 id="3-1-2-使用link标签（拿不到响应体）"><a href="#3-1-2-使用link标签（拿不到响应体）" class="headerlink" title="3.1.2 使用link标签（拿不到响应体）"></a>3.1.2 使用link标签（拿不到响应体）</h4><ul>
<li><code>link</code> 标签，有个  <code>src</code>  属性，我们以前是用来外联css样式，其实它也是相当于发送请求</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">src</span>=<span class="string">"http://api.douban.com/v2/movie/top250"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>看浏览器响应报文，可以发现link标签也可以跨域请求，但是一样，没办法拿到响应体</li>
</ul>
<h4 id="3-1-3-使用script标签（曲线拿到响应体）"><a href="#3-1-3-使用script标签（曲线拿到响应体）" class="headerlink" title="3.1.3 使用script标签（曲线拿到响应体）"></a>3.1.3 使用script标签（曲线拿到响应体）</h4><ul>
<li>代码如下：</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">json</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">'我被调用了'</span>);</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(json);</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"http://api.douban.com/v2/movie/top250?callback=test"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>结果如下图</li>
</ul>
<p><img src="/2018/08/19/模板引擎、跨域、JSONP/alrxu/1524478019298.png" alt=""></p>
<blockquote>
<p>说明：我们可以看到，我们预先定义了一个函数叫test，再然后在src里加了一个参数callback=test，可以发现，当请求完成，会自动调用test这个函数，并且把响应体（JSON数据）当做参数传递过来</p>
</blockquote>
<h3 id="3-2-使用script标签拿到JSON数据详解"><a href="#3-2-使用script标签拿到JSON数据详解" class="headerlink" title="3.2 使用script标签拿到JSON数据详解"></a>3.2 使用script标签拿到JSON数据详解</h3><h4 id="3-2-1-script导入外部文件作用"><a href="#3-2-1-script导入外部文件作用" class="headerlink" title="3.2.1 script导入外部文件作用"></a>3.2.1 script导入外部文件作用</h4><ul>
<li>使用script导入外部文件时，默认会把文件内容当JS代码执行，例：</li>
<li>新建  <code>1.txt</code> 文件，文件内容如下：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alert(<span class="string">'你好'</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>新建  <code>index.html</code>  文件，核心代码如下：</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"1.txt"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>结果：</li>
</ul>
<p><img src="/2018/08/19/模板引擎、跨域、JSONP/alrxu/1524531439034.png" alt=""></p>
<blockquote>
<p>结论：script导入文件会默认把文件内容当JS代码执行，跟文件格式无关</p>
</blockquote>
<h4 id="3-2-2-script标签曲线拿到响应体原理"><a href="#3-2-2-script标签曲线拿到响应体原理" class="headerlink" title="3.2.2 script标签曲线拿到响应体原理"></a>3.2.2 script标签曲线拿到响应体原理</h4><ul>
<li>新建  <code>index.html</code>  页面，代码如下</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="comment">//声明一个success函数</span></span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">success</span>(<span class="params">obj</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(obj);</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- script导入文件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"http://www.demo.com/top250.php"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>新建  <code>top250.php</code> 页面，代码如下</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="string">"success('hello')"</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>结果</li>
</ul>
<p><img src="/2018/08/19/模板引擎、跨域、JSONP/alrxu/1524533356664.png" alt=""></p>
<blockquote>
<p>说明：请求的top250文件里，服务器最终返回的是 success(‘hello’); 这个当JS代码执行时，是调用函数并传递参数hello的语法，因此可以看到success函数被调用，并且打印了参数hello</p>
</blockquote>
<ul>
<li>图解：</li>
</ul>
<p><img src="/2018/08/19/模板引擎、跨域、JSONP/alrxu/1524533792418.png" alt=""></p>
<ul>
<li>修改 <code>top250.php</code>  代码，如下:</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$data = <span class="keyword">array</span>(<span class="string">'name'</span> =&gt; <span class="string">'jack'</span>,<span class="string">'age'</span>=&gt;<span class="number">16</span>,<span class="string">'gender'</span>=&gt;<span class="string">'true'</span> );</span><br><span class="line"></span><br><span class="line">$json = json_encode($data);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">"success(&#123;$json&#125;)"</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>再次访问网页可以发现，打印的参数就编程了json对象</li>
</ul>
<p><img src="/2018/08/19/模板引擎、跨域、JSONP/alrxu/1524534767555.png" alt=""></p>
<blockquote>
<p> 结论：script标签拿到JSON数据的原理就是在服务器端写 <strong>调用浏览器端函数的语法</strong> ，然后把JSON数据当参数传递过去</p>
</blockquote>
<ul>
<li>请求数据时加参数，修改  <code>index.html</code></li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="comment">//声明函数</span></span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">myFunc</span>(<span class="params">obj</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(obj);</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 请求数据，并加入callback参数，值为myFunc --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"http://www.demo.com/top250.php?callback=myFunc"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>此时，除了请求  <code>top250.php</code> 外，还传递了个  <code>callback</code>  的参数过去，修改  <code>top250.php</code>，拿到这个参数</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//拿到传递过来的参数，即函数名</span></span><br><span class="line">    $funcName = $_GET[<span class="string">'callback'</span>];</span><br><span class="line"></span><br><span class="line">    <span class="comment">//准备数据</span></span><br><span class="line">    $data = <span class="keyword">array</span>(<span class="string">'name'</span> =&gt; <span class="string">'jack'</span>,<span class="string">'age'</span>=&gt;<span class="number">16</span>,<span class="string">'gender'</span>=&gt;<span class="keyword">true</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">//转化为JSON</span></span><br><span class="line">    $json = json_encode($data);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//传过来的是什么函数名，就调用什么函数</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"$funcName($json)"</span>; </span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-3-JSONP概念总结"><a href="#3-3-JSONP概念总结" class="headerlink" title="3.3 JSONP概念总结"></a>3.3 JSONP概念总结</h3><ul>
<li><p><strong>JSONP</strong>：</p>
<ul>
<li><strong>JSON</strong> with <strong>P</strong>adding，是一种借助于 <code>script</code> 标签发送跨域请求的技巧方案。</li>
</ul>
</li>
<li><p>它不是一套新技术，只是一套方案</p>
</li>
<li><p>能不能用这套方案，要看服务器端代码怎么写，服务器端如果写了调用函数的代码，那么就能支持JSONP方案</p>
</li>
<li><p>以后服务器的接口会有接口文档进行说明是否支持  <strong>JSONP</strong></p>
</li>
<li><p>建议：不要随意使用别人的接口，特别是别人写的支持jsonp的接口</p>
<p>例:<a href="https://developers.douban.com/wiki/?title=api_v2" target="_blank" rel="noopener">https://developers.douban.com/wiki/?title=api_v2</a></p>
</li>
</ul>
<h2 id="4-CORS"><a href="#4-CORS" class="headerlink" title="4. CORS"></a>4. CORS</h2><ul>
<li>Cross Origin Resource Share，跨域资源共享</li>
<li>直接从服务器端解决ajax无法跨域访问的问题（可以不要用jsonp了）</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 允许远端访问</span></span><br><span class="line">header(<span class="string">'Access-Control-Allow-Origin: *'</span>);</span><br></pre></td></tr></table></figure>
<blockquote>
<p> 这种方案无需客户端作出任何变化（客户端不用改代码），只是在服务端添加一个 <code>Access-Control-Allow-Origin</code> 的响应头，表示这个资源是否允许指定域请求（*代表任何网站都可以访问）。</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://Alrxu.github.io/2018/08/19/模板引擎、跨域、JSONP/" data-id="cjn9v9vye000lv86xktqko06g" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>
 


  
    <article id="post-ajax的使用" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/Alrxu.github.io/2018/08/14/ajax的使用/" class="article-date">
  <time datetime="2018-08-14T01:52:37.002Z" itemprop="datePublished">2018-08-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/Alrxu.github.io/2018/08/14/ajax的使用/">Ajax的使用</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <p>#ajax使用</p>
<h2 id="1-ajax介绍"><a href="#1-ajax介绍" class="headerlink" title="1. ajax介绍"></a>1. ajax介绍</h2><h3 id="1-1-名词解释"><a href="#1-1-名词解释" class="headerlink" title="1.1 名词解释"></a>1.1 名词解释</h3><ul>
<li>Ajax 即“Asynchronous Javascript And XML”（异步 JavaScript 和 XML），是指一种创建交互式网页应用的网页开发技术。                 —– 摘自百度百科</li>
</ul>
<ul>
<li>即可以让网页某个局部部分动态地给服务器发起请求，而不用整个页面刷新。</li>
</ul>
<h2 id="2-原生ajax技术实现："><a href="#2-原生ajax技术实现：" class="headerlink" title="2. 原生ajax技术实现："></a>2. 原生ajax技术实现：</h2><h3 id="2-1-XMLHttpRequest对象"><a href="#2-1-XMLHttpRequest对象" class="headerlink" title="2.1 XMLHttpRequest对象"></a>2.1 XMLHttpRequest对象</h3><ul>
<li>本质：是一个系统内置对象。专门用来发起局部请求的对象。一般会被简称为XHR</li>
</ul>
<h3 id="2-2-请求报文"><a href="#2-2-请求报文" class="headerlink" title="2.2 请求报文"></a>2.2 请求报文</h3><ul>
<li>一次请求三大部分：请求行、请求头、请求体（请求正文）</li>
</ul>
<p><img src="/2018/08/14/ajax的使用/../alrxu/1525960269427.png" alt=""></p>
<h3 id="2-3-使用XHR发get请求"><a href="#2-3-使用XHR发get请求" class="headerlink" title="2.3 使用XHR发get请求"></a>2.3 使用XHR发get请求</h3><blockquote>
<p>XMLHttpRequest就是个专门用来发局部请求的对象，而一个请求就包含<strong>请求行、请求头、请求体</strong>这几部分，所以我们也需要依次对这个对象设置这些内容</p>
</blockquote>
<ul>
<li>创建XMLHttpRequest：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br></pre></td></tr></table></figure>
<ul>
<li>设置请求行：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//参数1：类似于表单中的method属性</span></span><br><span class="line"><span class="comment">//参数2：类似于表单中的action属性</span></span><br><span class="line">xhr.open(<span class="string">'请求方式'</span>,<span class="string">'请求地址'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//例：</span></span><br><span class="line"><span class="comment">//使用get请求，请求服务器的test.php页面</span></span><br><span class="line">xhr.open(<span class="string">'get'</span>,<span class="string">'./test.php'</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>设置请求头（get请求一般不设置）：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">xhr.setRequestHeader(键，值);</span><br><span class="line"><span class="comment">//例：</span></span><br><span class="line">xhr.setRequestHeader(<span class="string">'Content-Type'</span>, <span class="string">'text/html'</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>发送请求（设置请求体）：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xhr.send(请求体内容);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注：如果是get请求，一般小括号里为空，什么都不写（get请求没有请求体），如果是post请求，就在小括号里加请求体内容（后面会专门针对post做案例）</p>
</blockquote>
<h3 id="2-4-获得响应正文"><a href="#2-4-获得响应正文" class="headerlink" title="2.4 获得响应正文"></a>2.4 获得响应正文</h3><blockquote>
<p>根据学过的http协议我们知道，当发送请求报文后，其本质是为了从服务器拿到响应正文。那么ajax如何拿？</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//当响应体回来了会调用此方法</span></span><br><span class="line">xhr.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//当此函数调用时，这个属性里保存的就是响应正文</span></span><br><span class="line">	xhr.responseText;       </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>为什么要用事件形式？</p>
<p>​    发送请求是一个网络操作，而受网络环境影响，可能会有延迟。我们不知道什么时候才能得到响应正文。所以最好用事件的形式，一旦接收到响应正文自动触发事件。</p>
</blockquote>
<h3 id="2-5-总结ajax代码步骤："><a href="#2-5-总结ajax代码步骤：" class="headerlink" title="2.5 总结ajax代码步骤："></a>2.5 总结ajax代码步骤：</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 创建请求对象</span></span><br><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line"><span class="comment">//2. 设置请求行</span></span><br><span class="line">xhr.open(<span class="string">'get'</span>,<span class="string">'./test.php'</span>);</span><br><span class="line"><span class="comment">//注：get请求可以不用设置请求头</span></span><br><span class="line"><span class="comment">//3. 发送请求</span></span><br><span class="line">xhr.send();</span><br><span class="line"><span class="comment">//4. 拿到响应体</span></span><br><span class="line">xhr.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-7-使用XHR发post请求"><a href="#2-7-使用XHR发post请求" class="headerlink" title="2.7 使用XHR发post请求"></a>2.7 使用XHR发post请求</h3><ul>
<li>跟get请求步骤都是一样的，分别是<ol>
<li>创建XHR对象</li>
<li>设置请求行</li>
<li>设置请求头（post请求头必须设置，get请求可以不设置）</li>
<li>发送请求（设置请求体）</li>
</ol>
</li>
</ul>
<p>代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 创建xhr对象</span></span><br><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line"><span class="comment">//2. 设置请求行</span></span><br><span class="line">xhr.open(<span class="string">'get'</span>,<span class="string">'./test.php'</span>);</span><br><span class="line"><span class="comment">//3. 设置请求头（必须设置成这样）</span></span><br><span class="line">xhr.setRequestHeader(<span class="string">'Content-type'</span>,<span class="string">'application/x-www-form-urlencoded'</span>);</span><br><span class="line"><span class="comment">//4. 发送请求（括号内传请求体）</span></span><br><span class="line">xhr.send(<span class="string">'name=jack'</span>);</span><br><span class="line"><span class="comment">//5. 监听响应的回调函数</span></span><br><span class="line">xhr.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(xhr.responseText);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>tips：一般get请求的请求头中没有带Content-type，但是post默认都有带。所以用ajax时也需要设置上（不然服务器拿不到post过来的数据）。</p>
</blockquote>
<h2 id="XMLHttpRequest的兼容"><a href="#XMLHttpRequest的兼容" class="headerlink" title="XMLHttpRequest的兼容"></a>XMLHttpRequest的兼容</h2><blockquote>
<p>XMLHttpRequest在IE6,IE5浏览器里不支持</p>
</blockquote>
<ul>
<li>兼容写法</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">   <span class="keyword">var</span> xhr;</span><br><span class="line"><span class="comment">//如果支持XMLHttpRequest</span></span><br><span class="line">   <span class="keyword">if</span>(<span class="built_in">window</span>.XMLHttpRequest)&#123;</span><br><span class="line"></span><br><span class="line">       xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line"></span><br><span class="line">   &#125;<span class="keyword">else</span>&#123;</span><br><span class="line"></span><br><span class="line">       xhr = <span class="keyword">new</span> ActiveXObject(<span class="string">'Microsoft.XMLHTTP'</span>);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>说明：如果浏览器支持XMLHttpRequest，则会创建XMLHttpRequest对象，如果不支持则用IE5,IE6的方法创建请求对象</p>
</blockquote>
<h2 id="3-onreadystatechange事件"><a href="#3-onreadystatechange事件" class="headerlink" title="3. onreadystatechange事件"></a>3. onreadystatechange事件</h2><ul>
<li>onload事件虽然可以监听响应完成，但是在IE8和之前的版本不支持</li>
<li>onreadystatechange事件也可以监听响应完成，并且所有浏览器都支持</li>
</ul>
<h3 id="3-1-基本使用"><a href="#3-1-基本使用" class="headerlink" title="3.1 基本使用"></a>3.1 基本使用</h3><p>例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.0 创建请求对象</span></span><br><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line"><span class="comment">//2.0 请求头(异步请求)</span></span><br><span class="line">xhr.open(<span class="string">'get'</span>,<span class="string">'test.php'</span>);</span><br><span class="line"><span class="comment">//3.0 发送请求</span></span><br><span class="line">xhr.send();</span><br><span class="line"></span><br><span class="line"><span class="comment">//4.0 监听响应完成</span></span><br><span class="line">xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">'我被调用了'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行代码，可以发现：打印了3次  <code>我被调用了</code></p>
<h3 id="3-2-ajax发起请求的5种状态"><a href="#3-2-ajax发起请求的5种状态" class="headerlink" title="3.2 ajax发起请求的5种状态"></a>3.2 ajax发起请求的5种状态</h3><table>
<thead>
<tr>
<th style="text-align:center">状态码</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">0</td>
<td style="text-align:center">请求未初始化</td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">服务器连接已建立</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">请求接收中</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">请求处理中</td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td style="text-align:center">请求已完成，且响应已就绪</td>
</tr>
</tbody>
</table>
<ul>
<li>状态码可以通过xhr对象的  <code>readyState</code>  属性获取</li>
<li>说明：<ul>
<li>刚刚创建出xhr对象时，状态码是0</li>
<li>当xhr调用open方法后，状态码是1</li>
<li>2，3，4这几个状态码都是在 <code>onreadystatechange</code> 时间里发生改变</li>
<li>只有<strong>状态码为4，才代表响应完成</strong></li>
</ul>
</li>
<li>因此，如果要保证一定拿到响应结果，必须要在状态码为4时才拿，因此代码应该如下写</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//监听响应完成</span></span><br><span class="line">xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="comment">//判断状态码是否为4</span></span><br><span class="line">	<span class="keyword">if</span>(xhr.readyState == <span class="number">4</span>)&#123;</span><br><span class="line">	   <span class="comment">//如果状态码为4才拿响应体</span></span><br><span class="line">       alert(xhr.responseText);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-3-服务器响应状态"><a href="#3-3-服务器响应状态" class="headerlink" title="3.3 服务器响应状态"></a>3.3 服务器响应状态</h3><ul>
<li>有时候整个请求完成，我们拿到的响应不一定是我们所想要的结果（比如请求了一个不存在的页面，结果就是404，或者服务器无法响应等）</li>
<li>因此，如果要保证我们真正能拿到响应的结果，首先要保证我们请求的页面能正确访问，也即，网页状态码要为<code>200</code> 也即状态为 <code>OK</code></li>
</ul>
<h4 id="3-3-1-通过xhr对象，拿到服务器响应状态码"><a href="#3-3-1-通过xhr对象，拿到服务器响应状态码" class="headerlink" title="3.3.1 通过xhr对象，拿到服务器响应状态码"></a>3.3.1 通过xhr对象，拿到服务器响应状态码</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xhr.status；</span><br></pre></td></tr></table></figure>
<h4 id="3-3-2-要正确获得响应体还要添加响应状态判断"><a href="#3-3-2-要正确获得响应体还要添加响应状态判断" class="headerlink" title="3.3.2 要正确获得响应体还要添加响应状态判断"></a>3.3.2 要正确获得响应体还要添加响应状态判断</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//监听响应完成</span></span><br><span class="line">xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="comment">//判断请求状态码是否为4（请求完成）,并且响应状态为200（正确请求到网页）</span></span><br><span class="line">	<span class="keyword">if</span>(xhr.readyState == <span class="number">4</span> &amp;&amp; xhr.statues == <span class="number">200</span>)&#123;</span><br><span class="line">	   <span class="comment">//如果状态码为4才拿响应体</span></span><br><span class="line">       alert(xhr.responseText);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4-JSON对象"><a href="#4-JSON对象" class="headerlink" title="4. JSON对象"></a>4. JSON对象</h2><ul>
<li>JSON(JavaScript Object Notation, JS对象标记) 是一种轻量级的数据交换（传输）格式。</li>
<li>所有语言都支持JSON，因为JSON本质上就只是一个按规定格式写的字符串</li>
</ul>
<h3 id="4-1-为什么需要JSON对象"><a href="#4-1-为什么需要JSON对象" class="headerlink" title="4.1 为什么需要JSON对象"></a>4.1 为什么需要JSON对象</h3><ul>
<li>不论是前端开发、iOS开发、安卓开发、桌面开发等等、都需要跟服务器交互</li>
<li>界面使用的开发语言可能是JS，可能是C，可能是Java等，服务器的语言可能是PHP可能是C可能是Java等</li>
<li>不同语言的数据无法直接共享。例如：后台语言PHP，有个数组数据要发给前端去展示，但是前端用的JS不认识PHP的数组。</li>
<li>JSON就是为了能方便各种语言之间数据交换的字符串的数据格式</li>
</ul>
<p>注：只要是支持JSON的语言，其内部都提供了一套方法，把JSON字符串转换为自己语言里的数组或对象。</p>
<h3 id="4-2-JSON对象基本符号认识"><a href="#4-2-JSON对象基本符号认识" class="headerlink" title="4.2 JSON对象基本符号认识"></a>4.2 JSON对象基本符号认识</h3><p><code>{}</code>  代表对象</p>
<p><code>[]</code>  代表数组</p>
<p>如果用{}，那写法要遵循<strong>键值对</strong>的写法，并且<strong>键必须是字符串</strong></p>
<p>例:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">'&#123;"name":"andy","age":16,"gender":true&#125;';</span><br></pre></td></tr></table></figure>
<ul>
<li>说明：<ul>
<li>这个JSON格式代表一个对象，对象有3个属性：name属性，它的值是andy，age属性，她的值是16，gender属性，它的值是true</li>
<li>键一定是字符串，但是值可以是字符串、也可以是数字或布尔类型</li>
</ul>
</li>
</ul>
<p>例2：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'[&#123;"name":"jack","age":16,"gender":true&#125;,&#123;"name":"rose","age":15,"gender":false&#125;]'</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>说明<ul>
<li>这个JSON格式代表一个数组，数组中有两个元素，每个元素都是一个对象。</li>
</ul>
</li>
</ul>
<h3 id="4-3-在JS中使用JSON"><a href="#4-3-在JS中使用JSON" class="headerlink" title="4.3 在JS中使用JSON"></a>4.3 在JS中使用JSON</h3><p>需求说明：</p>
<ul>
<li>假设服务器会返回一个JSON字符串过来，表示一个对象（有姓名和年龄两个属性），然后通过JS把这个JSON字符串的值显示在界面上</li>
</ul>
<p>核心代码如下</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">   <span class="comment">//假设这是服务器发回来的JSON数据（本质上是字符串）</span></span><br><span class="line">   <span class="keyword">var</span> jsonStr = <span class="string">'&#123;"name":"jack","age":16&#125;'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//按钮的点击事件</span></span><br><span class="line">   <span class="built_in">document</span>.getElementById(<span class="string">'btn'</span>).onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">       </span><br><span class="line">       <span class="comment">//先把json字符串转换成对象类型</span></span><br><span class="line">       <span class="keyword">var</span> jsonObj = <span class="built_in">JSON</span>.parse(jsonStr);</span><br><span class="line">       <span class="comment">//赋值给姓名</span></span><br><span class="line">       <span class="built_in">document</span>.getElementById(<span class="string">'name'</span>).value = jsonObj.name;</span><br><span class="line"></span><br><span class="line">       <span class="comment">//赋值给年龄</span></span><br><span class="line">       <span class="built_in">document</span>.getElementById(<span class="string">'age'</span>).value = jsonObj.age;</span><br><span class="line"></span><br><span class="line">   &#125;;</span><br></pre></td></tr></table></figure>
<p>解析：</p>
<ul>
<li>服务器发回的JSON字符串表示一个对象</li>
<li>但这个字符串里的  <code>jack</code>  和  <code>16</code>  这两个值在字符串里，不太方便取出来（要做substr截取）赋值到界面</li>
<li>因为这个字符串本身就表示一个对象，所以我们要是能想办法把这个字符串直接转成JS中的对象类型，那就方便能取到里面的值了</li>
</ul>
<h4 id="4-3-1-JSON字符串转成JS数据："><a href="#4-3-1-JSON字符串转成JS数据：" class="headerlink" title="4.3.1  JSON字符串转成JS数据："></a>4.3.1  JSON字符串转成JS数据：</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>字符串);</span><br></pre></td></tr></table></figure>
<ul>
<li>说明：如果JSON字符串最外层的是{}，会得到对象类型，如果JSON最外层的是[]，会得到数组类型。</li>
</ul>
<p>例：</p>
<p><img src="/2018/08/14/ajax的使用/../alrxu/1523957763604.png" alt=""></p>
<p>####4.3.2 JS数据转成JSON字符串</p>
<p>语法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">JSON</span>.stringify(js数据);</span><br></pre></td></tr></table></figure>
<p>例：</p>
<p><img src="/2018/08/14/ajax的使用/../alrxu/1523957534089.png" alt=""></p>
<h3 id="4-4-PHP中数据和JSON的互转"><a href="#4-4-PHP中数据和JSON的互转" class="headerlink" title="4.4 PHP中数据和JSON的互转"></a>4.4 PHP中数据和JSON的互转</h3><ul>
<li>把PHP中的数组或对象转成JSON</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">json_encode(数据);</span><br></pre></td></tr></table></figure>
<p>例：</p>
<p><img src="/2018/08/14/ajax的使用/../alrxu/1523958549003.png" alt=""></p>
<h1 id="同步和异步"><a href="#同步和异步" class="headerlink" title="同步和异步"></a>同步和异步</h1><h2 id="1-同步、异步的概念"><a href="#1-同步、异步的概念" class="headerlink" title="1. 同步、异步的概念"></a>1. 同步、异步的概念</h2><h3 id="1-1-同步"><a href="#1-1-同步" class="headerlink" title="1.1 同步"></a>1.1 同步</h3><ul>
<li><p>一堆任务，要一个完成后才能做下一个。</p>
<p> 相当于一个人处理一堆事。</p>
</li>
</ul>
<h3 id="1-2-异步"><a href="#1-2-异步" class="headerlink" title="1.2 异步"></a>1.2 异步</h3><ul>
<li>一堆任务，分为好几个人做，那么可以同时去做好多件事</li>
</ul>
<h3 id="1-3-代码中体现同步和异步"><a href="#1-3-代码中体现同步和异步" class="headerlink" title="1.3 代码中体现同步和异步"></a>1.3 代码中体现同步和异步</h3><ul>
<li>在使用xhr对象，设置请求行时，其实有第三个参数，所有参数如下</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xhr.open(<span class="string">'请求方式'</span>,<span class="string">'请求地址'</span>,是否异步);</span><br></pre></td></tr></table></figure>
<blockquote>
<p> 参数3是一个bool类型，为true代表这个请求是异步的，为false代表这个请求是同步的，如果不写参数3，默认就是异步</p>
</blockquote>
<ul>
<li>根据我们刚刚了解的同步、异步概念，写个案例看看差别。</li>
</ul>
<p>html结构如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"发异步请求"</span> <span class="attr">id</span>=<span class="string">"async"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"发同步请求"</span> <span class="attr">id</span>=<span class="string">"sync"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>说明：</p>
<ul>
<li>两个按钮，一个点击后发异步请求，一个点击后发同步请求</li>
</ul>
<p>JS代码如下：</p>
<ul>
<li>异步按钮点击</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//异步请求按钮的点击事件</span></span><br><span class="line">   <span class="built_in">document</span>.getElementById(<span class="string">"async"</span>).onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">       </span><br><span class="line">       <span class="comment">//1.0 创建请求对象</span></span><br><span class="line">       <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line"></span><br><span class="line">       <span class="comment">//2.0 请求头(异步请求)</span></span><br><span class="line">       xhr.open(<span class="string">'get'</span>,<span class="string">'test.php'</span>,<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">       <span class="comment">//3.0 发送请求</span></span><br><span class="line">       xhr.send();</span><br><span class="line"></span><br><span class="line">       alert(<span class="string">"异步：我在send后面"</span>);</span><br><span class="line">       </span><br><span class="line">   &#125;;</span><br></pre></td></tr></table></figure>
<ul>
<li>同步按钮点击</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//同步请求按钮的点击事件</span></span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">"sync"</span>).onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//1.0 创建请求对象</span></span><br><span class="line">    <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.0 请求头(异步请求)</span></span><br><span class="line">    xhr.open(<span class="string">'get'</span>,<span class="string">'test.php'</span>,<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3.0 发送请求</span></span><br><span class="line">    xhr.send();</span><br><span class="line"></span><br><span class="line">    alert(<span class="string">'同步：我在send后面'</span>);</span><br><span class="line">    </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>test.php  代码</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//睡1.5秒（模拟网络延迟1.5秒）</span></span><br><span class="line">sleep(<span class="number">1.5</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//输出响应体</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">'hello'</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>代码分析<ul>
<li>请求test.php页面，这个页面会暂停1.5秒，用来模拟网络延时（也就是要3秒后才会完成一次响应）</li>
<li>无论是异步还是同步请求，在send方法后，都有一个alert。</li>
</ul>
</li>
<li>结果：异步请求不用等请求结束会立即打印后面的话，同步请求要等请求完了后才会打印后面的话（即等1.5秒）</li>
</ul>
<p><strong>总结</strong>：异步不影响后面代码的执行，同步会影响！</p>
<h2 id="2-JS中处理JSON的兼容"><a href="#2-JS中处理JSON的兼容" class="headerlink" title="2.JS中处理JSON的兼容"></a>2.JS中处理JSON的兼容</h2><ul>
<li>在IE7和之前的版本，不支持JSON.parse这个方法处理JSON字符串</li>
</ul>
<h3 id="2-1-使用eval函数兼容"><a href="#2-1-使用eval函数兼容" class="headerlink" title="2.1 使用eval函数兼容"></a>2.1 使用eval函数兼容</h3><p>用法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = <span class="built_in">eval</span>(<span class="built_in">JSON</span>字符串);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>不推荐使用： 不安全，eval函数可以执行任意js语句，如果服务器端发回来的是一段破坏性代码，eval也会执行</p>
</blockquote>
<h3 id="2-2-使用框架兼容"><a href="#2-2-使用框架兼容" class="headerlink" title="2.2 使用框架兼容"></a>2.2 使用框架兼容</h3><ul>
<li><code>json2.js</code> 这个框架专门用来做json格式的兼容，只要</li>
<li>导入这个文件，那么无论在什么版本浏览器里JSON.parse都可使用</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--[if lt IE 8]&gt;</span></span><br><span class="line"><span class="comment">    &lt;script src="json2.js"&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="comment">&lt;![endif]--&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>注：if lt IE 8 代表只有在IE8版本以下才执行标签内的代码</p>
</blockquote>
<h2 id="3-XML数据"><a href="#3-XML数据" class="headerlink" title="3.XML数据"></a>3.XML数据</h2><ul>
<li>XML是一种标记语言，很类似HTML，但其宗旨是用来传输数据。</li>
</ul>
<p><img src="/2018/08/14/ajax的使用/../alrxu/1524049384628.png" alt=""></p>
<p>语法规则：</p>
<ol>
<li>XML的文档声明是&lt;?xml version=”1.0” encoding=”UTF-8”?&gt;，可以不写，但如果要写，必须写在第一行</li>
<li>必须要有根标签</li>
<li>属性用双引号（即使用单引号浏览器也会修改为双引号）</li>
<li>标签名可以任意写，但是不允许有空格，且只能以字母、下划线开头</li>
</ol>
<p>例:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">root</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>1<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">name</span>&gt;</span>张三<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">age</span>&gt;</span>16<span class="tag">&lt;/<span class="name">age</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">score</span>&gt;</span>99<span class="tag">&lt;/<span class="name">score</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>2<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">name</span>&gt;</span>李四<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">age</span>&gt;</span>18<span class="tag">&lt;/<span class="name">age</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">score</span>&gt;</span>97<span class="tag">&lt;/<span class="name">score</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>3<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">name</span>&gt;</span>王五<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">age</span>&gt;</span>15<span class="tag">&lt;/<span class="name">age</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">score</span>&gt;</span>89<span class="tag">&lt;/<span class="name">score</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-1-JS获得XML数据"><a href="#3-1-JS获得XML数据" class="headerlink" title="3.1 JS获得XML数据"></a>3.1 JS获得XML数据</h3><ul>
<li>如果服务端返回的是一个XML数据，应该用<strong>respondsXML</strong>获取</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//此时xmlDoc就得到了一个xml文档</span></span><br><span class="line"><span class="keyword">var</span> xmlDoc = xhr.respondsXML;</span><br></pre></td></tr></table></figure>
<h3 id="3-2-操作XML"><a href="#3-2-操作XML" class="headerlink" title="3.2 操作XML"></a>3.2 操作XML</h3><ul>
<li>因为获取到的xml是一个document类型的对象（即以前学的文档树），因此可以用getElement的方式找到对应元素数据</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获得所有标签为item的元素</span></span><br><span class="line">xmlDoc.getElementsByTagName(<span class="string">'item'</span>);</span><br></pre></td></tr></table></figure>
<blockquote>
<p> 然后其他操作跟JS一样，例如innerHTML等属性可以取到或者赋值标签内的元素</p>
</blockquote>
<blockquote>
<p>XML一般用得少，因为它有大量标签占容量，网络传输相对JSON更耗流量和更慢</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://Alrxu.github.io/2018/08/14/ajax的使用/" data-id="cjn9v9vy8000iv86x77s5pl0g" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>
 


  
    <article id="post-http、cookie、session" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/Alrxu.github.io/2018/08/10/http、cookie、session/" class="article-date">
  <time datetime="2018-08-10T09:08:28.633Z" itemprop="datePublished">2018-08-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/Alrxu.github.io/2018/08/10/http、cookie、session/">PHP_http协议、cookie和session</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h2 id="http协议、cookie和session"><a href="#http协议、cookie和session" class="headerlink" title="http协议、cookie和session"></a>http协议、cookie和session</h2><h3 id="1-http协议"><a href="#1-http协议" class="headerlink" title="1. http协议"></a>1. http协议</h3><h4 id="1-1-http概念："><a href="#1-1-http概念：" class="headerlink" title="1.1 http概念："></a>1.1 http概念：</h4><p><strong>协议</strong>：就是一个规范行为的约定。</p>
<p><strong>http</strong>：HyperText（超文本） Transfer（传输） Protocol（协议）</p>
<p>首先http也是一种协议，是一种用来约束    <code>超文本传输</code> 时的行为。</p>
<p>​    </p>
<p><code>超文本</code>是什么？其实就是<code>html</code></p>
<blockquote>
<p>html全称：HyperText Markup Language  超文本标记语言</p>
</blockquote>
<p><strong>所以http就是一个专门用来做网页传输的一种协议。</strong></p>
<h4 id="1-2-http解析"><a href="#1-2-http解析" class="headerlink" title="1.2 http解析"></a>1.2 http解析</h4><p><img src="/2018/08/10/http、cookie、session/../alrxu/1521541410589-1521541412198.png" alt=""></p>
<p>访问一个网页就是<code>浏览器</code>发起<code>请求</code>，<code>服务器</code>对其<code>响应</code>。</p>
<p>而http协议就是一套规范<code>请求</code>格式，和<code>响应</code>格式的约定</p>
<h5 id="1-2-1-请求报文"><a href="#1-2-1-请求报文" class="headerlink" title="1.2.1 请求报文"></a>1.2.1 请求报文</h5><p>​    浏览器发请求到底是发什么东西呢？其实就是一段按照协议格式写好的内容。这段内容叫    <code>请求报文</code></p>
<p><strong>如何看到<code>请求报文</code></strong></p>
<p>​    打开浏览器，按F12，弹出底部栏后，再点   <code>Network</code></p>
<p>然后下面红框区域，就是浏览器本次发送的所有<code>请求记录</code></p>
<p><img src="/2018/08/10/http、cookie、session/../alrxu/1521542352697.png" alt="">然后点击本次发请求的地址，如<code>127.0.0.1</code></p>
<p>右侧弹出界面，然后选<code>Headers</code>，右侧有<code>Request</code>和 <code>Response</code>，分别对应的就是<code>请求报文</code>和<code>响应报文</code></p>
<p>点开<code>Request Headers</code>，默认显示的是浏览器优化后的显示结果，如果要看到<code>请求报文</code>点<code>view source</code>，如图分别为三大部分：<code>请求行</code>、<code>请求头</code>、<code>请求正文（也叫请求体）</code></p>
<p><img src="/2018/08/10/http、cookie、session/../alrxu/1521595909958.png" alt=""></p>
<p><code>请求行</code>：指明本次请求是<code>get</code>请求还是<code>post</code>请求（也有其他请求，例如put、delete、trace等，但不常用，常用的主要为get何post），以及指明本次请求遵守的协议版本</p>
<p><code>请求头</code>：本部分的格式以<code>键值对</code>的形式组成，每行一对。本部分大概的内容有：请求目的地域名、连接状态、缓存状态、发起请求的浏览器信息、字符编码等。请求头后面会有一个空行，作为请求头部分结束的标记。</p>
<p><code>请求正文</code>：本次请求发送给服务器的附加信息。一般<code>get请求</code>的请求正文为空</p>
<p>post请求的请求报文:</p>
<p>首先，界面代码如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"login.php"</span> <span class="attr">method</span>=<span class="string">"POST"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">'id'</span> <span class="attr">placeholder</span>=<span class="string">"请输入账号"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">'pwd'</span> <span class="attr">placeholder</span>=<span class="string">"请输入密码"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>当点击提交后，提交到login.php。使用post请求。</p>
<p>我们看到的请求报文如下：</p>
<p><img src="/2018/08/10/http、cookie、session/../alrxu/1521599849324.png" alt=""></p>
<p>无论是<code>get</code>还是<code>post</code>发起的请求，格式都是三大部分，<code>请求行</code>、<code>请求头</code>、<code>请求体</code>。</p>
<p>主要差别在，请求行里，变成了<code>post</code>请求，请求体也就是请求正文里有了内容。<code>get</code>请求体里没内容主要是因为<code>get</code>请求把数据主要通过网址传递过去。而<code>post</code>是通过请求报文传递过去</p>
<blockquote>
<p>总结： 请求报文里主要包含了要访问的文件、和在请求时传递给服务器的数据、发请求的系统环境等。</p>
</blockquote>
<p>附：请求头部分内容说明</p>
<table>
<thead>
<tr>
<th><strong>请求头</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Host</strong></td>
<td>接受请求的服务器地址，可以是IP:端口号，也可以是域名</td>
</tr>
<tr>
<td><strong>User-Agent</strong></td>
<td>发送请求的应用程序名称</td>
</tr>
<tr>
<td><strong>Connection</strong></td>
<td>指定与连接相关的属性，如Connection:Keep-Alive</td>
</tr>
<tr>
<td><strong>Accept-Charset</strong></td>
<td>通知服务端可以发送的编码格式</td>
</tr>
<tr>
<td><strong>Accept-Encoding</strong></td>
<td>通知服务端可以发送的数据压缩格式</td>
</tr>
<tr>
<td><strong>Accept-Language</strong></td>
<td>通知服务端可以发送的语言</td>
</tr>
</tbody>
</table>
<h5 id="1-2-2-响应报文"><a href="#1-2-2-响应报文" class="headerlink" title="1.2.2 响应报文"></a>1.2.2 响应报文</h5><p>响应报文就是浏览器收到请求后，对浏览器所做出的响应（即回应）。包含三大部分：<code>状态行</code>，<code>响应头</code>，<code>响应体（响应正文）</code></p>
<p><img src="/2018/08/10/http、cookie、session/../alrxu/1521603363421.png" alt=""></p>
<p>状态行：（HTTP/1.1）协议版本、（200）状态码、（OK）状态消息</p>
<p>响应头：包含响应时间、服务器环境、响应体的格式等，响应头后面会有一个空行代表结尾。</p>
<p>响应体：就是发回的文件内容。例如浏览器请求index.html界面，那么假设服务器能正常访问到这个文件的情况下，服务器会把index.html里的内容当做响应体发回给浏览器，然后浏览器自己再解析。</p>
<blockquote>
<p>总结：响应报文就是服务器对浏览器这次请求的一个回应，要么告诉浏览器失败，要么给浏览器发回一段内容并告诉它解析格式。</p>
</blockquote>
<p>附：</p>
<p>状态码一览</p>
<table>
<thead>
<tr>
<th>状态码</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>200</td>
<td>响应成功</td>
</tr>
<tr>
<td>302</td>
<td>发生跳转</td>
</tr>
<tr>
<td>400</td>
<td>客户端请求有语法错误，不被服务器理解</td>
</tr>
<tr>
<td>403</td>
<td>服务器收到请求，但拒绝提供服务</td>
</tr>
<tr>
<td>404</td>
<td>请求的资源不存在</td>
</tr>
<tr>
<td>500</td>
<td>服务器内部错误</td>
</tr>
</tbody>
</table>
<h5 id="1-2-3-一次完整的浏览器请求和服务器响应图解"><a href="#1-2-3-一次完整的浏览器请求和服务器响应图解" class="headerlink" title="1.2.3 一次完整的浏览器请求和服务器响应图解"></a>1.2.3 一次完整的浏览器请求和服务器响应图解</h5><p><img src="/2018/08/10/http、cookie、session/../alrxu/1521618058059.png" alt=""></p>
<p>说明：</p>
<p>​    1.服务器为什么能收到浏览器的请求，是因为服务器装了Apache。</p>
<p>​    2.如果浏览器请求的是.html或者.txt等格式的文件，服务器会直接把这个文件找到并读取内容做成响应报文发回给浏览器</p>
<p>​    3.如果浏览器请求的是.php文件，那么会先把这个php文件先交给    <code>php7apache2_4.dll</code>去执行（本处细节在第一天有讲），把执行后的结果再做成响应报文发回给浏览器</p>
<p>​    4.如果服务器找不到浏览器要请求的文件，响应报文中也有响应体，响应体是一个404 Not Found的页面，状态码是404</p>
<h3 id="2-cookie"><a href="#2-cookie" class="headerlink" title="2. cookie"></a>2. cookie</h3><h4 id="2-1-cookie是什么"><a href="#2-1-cookie是什么" class="headerlink" title="2.1 cookie是什么"></a>2.1 cookie是什么</h4><p>​    比如说你去超市买食品，带回家后突然发现食品过期了，这个时候你直接去超市，超市可不认识你。但是超市认识你的小票。凭小票就能知道你上一次来超市的各种信息。</p>
<p>​    那么Cookie 就像是在超级市场买东西拿到的小票，由超市（Server）发给消费者（Browser），超市方面不用记住每一个消费者的脸，但是他们认识消费者手里的小票（Cookie），可以通过小票知道消费者之前的一些消费信息（在服务端产生的数据）。</p>
<p>总结：获取浏览器的cookie语法：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$_COOKIE[<span class="string">'名'</span>];</span><br></pre></td></tr></table></figure>
<p>设置cookie的有效期,要用到cookie的第三个参数，设置失效时间</p>
<p>用法如下：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setcookie(<span class="string">'名'</span>,<span class="string">'值'</span>,time() + 秒数);</span><br></pre></td></tr></table></figure>
<p>例：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setcookie(<span class="string">'login'</span>,<span class="string">'ok'</span>,time() + <span class="number">60</span>); <span class="comment">//代表60秒后失效</span></span><br></pre></td></tr></table></figure>
<p>#### </p>
<h5 id="2-2-1-浏览器端自行删除："><a href="#2-2-1-浏览器端自行删除：" class="headerlink" title="2.2.1 浏览器端自行删除："></a>2.2.1 浏览器端自行删除：</h5><p>​    首先按F12打开开发者工具，然后点击    <code>application</code>，再点击  <code>cookies</code> ，右侧找到并点击你要删除的那条cookie，最后点<code>x</code>就删掉了。</p>
<p>如下图：</p>
<p><img src="/2018/08/10/http、cookie、session/../alrxu/1522036413346.png" alt=""></p>
<h5 id="2-2-2-服务器端用代码删除："><a href="#2-2-2-服务器端用代码删除：" class="headerlink" title="2.2.2 服务器端用代码删除："></a>2.2.2 服务器端用代码删除：</h5><p>我们知道，cookie是有有效期的，所以其实删除cookie的思路就是设置cookie，让它的过期时间为过去的时间即可</p>
<p>语法如下：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setcookie(<span class="string">'名'</span>,<span class="string">'值'</span>,过去的某个时间);</span><br></pre></td></tr></table></figure>
<p>例:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setcookie(<span class="string">'closeAD'</span>,<span class="string">'off'</span>,time() - <span class="number">3600</span>);</span><br></pre></td></tr></table></figure>
<h4 id="2-3-cookie案例1：记住登录名"><a href="#2-3-cookie案例1：记住登录名" class="headerlink" title="2.3 cookie案例1：记住登录名"></a>2.3 cookie案例1：记住登录名</h4><p>有很多的网站，当你登录后，它会记住你的用户名，下次再登录时直接把用户名显示在界面上了，</p>
<p>其实也是用cookie，把信息保存在本地，在需要时再显示出来。</p>
<p>步骤：</p>
<p>1.新建<code>login.php</code>页面，代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">    </span><br><span class="line">    //先判断cookie里有没有username，如果有，就取出来赋值给变量$username，如果没有，就给$username赋值为空字符</span><br><span class="line">    $username = isset( $_COOKIE[&apos;username&apos;] ) ? $_COOKIE[&apos;username&apos;] : &apos;&apos;;</span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;form action=&quot;check.php&quot; method=&quot;post&quot;&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- 如果有cookie.此时value会为保存的用户名，否则为空 --&gt;</span><br><span class="line">        &lt;input type=&quot;text&quot; name=&apos;username&apos; placeholder=&quot;请输入用户名&quot; value=&quot;&lt;?php echo $username; ?&gt;&quot;&gt;</span><br><span class="line">        &lt;input type=&quot;text&quot; name=&apos;userpwd&apos; placeholder=&quot;请输入密码&quot;&gt;</span><br><span class="line">        &lt;input type=&quot;submit&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>2.新建<code>check.php</code>页面，代码如下：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">"en"</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br><span class="line">    &lt;meta name=<span class="string">"viewport"</span> content=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span><br><span class="line">    &lt;meta http-equiv=<span class="string">"X-UA-Compatible"</span> content=<span class="string">"ie=edge"</span>&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//取出提交来的账号和密码</span></span><br><span class="line">$username = $_POST[<span class="string">'username'</span>];</span><br><span class="line">$pwd = $_POST[<span class="string">'userpwd'</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//判断账号密码是否正确</span></span><br><span class="line"><span class="keyword">if</span>($username == <span class="string">'admin'</span> &amp;&amp; $pwd==<span class="string">'123456'</span>)&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">'登录成功'</span>;</span><br><span class="line">    <span class="comment">//如果正确，把用户名写入浏览器cookie</span></span><br><span class="line">    setcookie(<span class="string">'username'</span>,$username,time() + <span class="number">60</span>*<span class="number">60</span>*<span class="number">24</span>);</span><br><span class="line"></span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">'账号或密码错误！'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>此时，当登录成功一次后，下次再打开登录页面，即<code>login.php</code>会发现上面有登录名了</p>
<h4 id="2-4-cookie案例2：保持登录状态"><a href="#2-4-cookie案例2：保持登录状态" class="headerlink" title="2.4 cookie案例2：保持登录状态"></a>2.4 cookie案例2：保持登录状态</h4><h5 id="2-4-1-搭建登录界面"><a href="#2-4-1-搭建登录界面" class="headerlink" title="2.4.1 搭建登录界面"></a>2.4.1 搭建登录界面</h5><p>新建  <code>login.html</code>文件，代码如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">        form&#123;</span></span><br><span class="line"><span class="undefined">            width: 180px;</span></span><br><span class="line"><span class="undefined">            margin: 100px auto;</span></span><br><span class="line"><span class="undefined">            font-size: 12px;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 提交到check.php页面 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"check.php"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"请输入账号"</span> <span class="attr">name</span>=<span class="string">'username'</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"请输入密码"</span> <span class="attr">name</span>=<span class="string">'pwd'</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"登录"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="2-4-2-验证账号密码是否正确"><a href="#2-4-2-验证账号密码是否正确" class="headerlink" title="2.4.2 验证账号密码是否正确"></a>2.4.2 验证账号密码是否正确</h5><p>在登录界面可知，用户登录后，会提交到 <code>check.php</code>页面，因此新建  <code>check.php</code>文件，在此做账号密码验证</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">   </span><br><span class="line">   <span class="comment">//判断是否有提交账号和密码数据过来</span></span><br><span class="line">   <span class="keyword">if</span>(<span class="keyword">isset</span>($_POST[<span class="string">'username'</span>]) &amp;&amp; <span class="keyword">isset</span>($_POST[<span class="string">'pwd'</span>]))&#123;</span><br><span class="line">    </span><br><span class="line">       <span class="comment">//取出账号和密码</span></span><br><span class="line">       $username = $_POST[<span class="string">'username'</span>];</span><br><span class="line">       $pwd = $_POST[<span class="string">'pwd'</span>];</span><br><span class="line"></span><br><span class="line">       <span class="comment">//打开数据库</span></span><br><span class="line">       $link = mysqli_connect(<span class="string">'localhost'</span>,<span class="string">'root'</span>,<span class="string">'root'</span>,<span class="string">'test'</span>);</span><br><span class="line">   </span><br><span class="line">       <span class="comment">//准备sql查询语句</span></span><br><span class="line">       $sql = <span class="string">"select *from user where username='$username' and password='$pwd'"</span>;</span><br><span class="line"></span><br><span class="line">       <span class="comment">//查询结果</span></span><br><span class="line">       $result = mysqli_query($link,$sql);</span><br><span class="line"></span><br><span class="line">       <span class="comment">//转换成数组</span></span><br><span class="line">       $data = mysqli_fetch_all($result,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">       <span class="comment">//关闭数据库连接</span></span><br><span class="line">       mysqli_close($link);</span><br><span class="line"></span><br><span class="line">       <span class="comment">//如果结果不为0，证明有此账号密码，则登录成功，给它显示网页</span></span><br><span class="line">       <span class="keyword">if</span>(count($data) &gt; <span class="number">0</span>)&#123;</span><br><span class="line">           	<span class="comment">//去主页面</span></span><br><span class="line">            header(<span class="string">'location:main.php'</span>);</span><br><span class="line">       &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		   <span class="comment">//账号密码错误，去登录页</span></span><br><span class="line">            header(<span class="string">'location:login.html'</span>);</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>再新建<code>main.php</code>，代码如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">    &lt;h2&gt;欢迎登录：某某！您的余额为：0元&lt;/h2&gt;</span><br><span class="line"></span><br><span class="line">    &lt;p&gt;Lorem ipsum dolor sit amet consectetur adipisicing elit. Fugit eos deleniti perspiciatis ea enim ipsa nam ipsam aliquid facere obcaecati rerum, iusto atque error beatae excepturi tempore alias natus! Vel?&lt;/p&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h5 id="2-4-3-存在的问题："><a href="#2-4-3-存在的问题：" class="headerlink" title="2.4.3 存在的问题："></a>2.4.3 存在的问题：</h5><ol>
<li>在  <code>main.php</code>里，希望把登录用户的信息展示出来，例如，展示他的用户名和余额。</li>
</ol>
<ol start="2">
<li>用户不登录，直接访问 <code>main.php</code>这个页面，也能直接出这个界面。</li>
</ol>
<p>解决思路：我们在账号密码验证正确后，把用户名、余额存到cookie里，然后在main.php里判断是否有这个cookie，如果有，证明登录成功可以访问，把cookie的内容取出来显示到界面上。如果没有，就调回login.html。</p>
<h5 id="2-4-3-把登录信息存到cookie"><a href="#2-4-3-把登录信息存到cookie" class="headerlink" title="2.4.3 把登录信息存到cookie"></a>2.4.3 把登录信息存到cookie</h5><p>修改  <code>check.php</code> 中 <code>if( count($data) &gt; 0 )</code> 部分，代码如下：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//信息存到cookie</span></span><br><span class="line">setcookie(<span class="string">'name'</span>,$username);</span><br><span class="line">setcookie(<span class="string">'money'</span>,$data[<span class="number">0</span>][<span class="string">'money'</span>]);</span><br><span class="line"></span><br><span class="line">header(<span class="string">'location:main.php'</span>);</span><br></pre></td></tr></table></figure>
<p>然后修改  <code>main.php</code>的代码，让它有cookie才能访问，没有调回登录，代码如下：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">	<span class="comment">//取cookie</span></span><br><span class="line">    $username = $_COOKIE[<span class="string">'name'</span>];</span><br><span class="line">    $money = $_COOKIE[<span class="string">'money'</span>];</span><br><span class="line">	<span class="comment">//判断是否存在cookie</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">isset</span>($username) &amp;&amp; <span class="keyword">isset</span>($money)):</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">"en"</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br><span class="line">    &lt;meta name=<span class="string">"viewport"</span> content=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span><br><span class="line">    &lt;meta http-equiv=<span class="string">"X-UA-Compatible"</span> content=<span class="string">"ie=edge"</span>&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">    &lt;h2&gt;欢迎登录：<span class="meta">&lt;?php</span> <span class="keyword">echo</span> $username; <span class="meta">?&gt;</span>您的余额为：<span class="meta">&lt;?php</span> <span class="keyword">echo</span> $money; <span class="meta">?&gt;</span>元&lt;/h2&gt;</span><br><span class="line"></span><br><span class="line">    &lt;p&gt;Lorem ipsum dolor sit amet consectetur adipisicing elit. Fugit eos deleniti perspiciatis ea enim ipsa nam ipsam aliquid facere obcaecati rerum, iusto atque error beatae excepturi tempore alias natus! Vel?&lt;/p&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">	    <span class="comment">//如果不存在cookie，证明没登录过，返回登录页</span></span><br><span class="line">        header(<span class="string">'location:login.html'</span>);</span><br><span class="line">    <span class="keyword">endif</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>至此，我们完成了登录状态保持。</p>
<h3 id="3-session"><a href="#3-session" class="headerlink" title="3. session"></a>3. session</h3><h4 id="3-1-cookie可以被伪造"><a href="#3-1-cookie可以被伪造" class="headerlink" title="3.1 cookie可以被伪造"></a>3.1 cookie可以被伪造</h4><p>​    由于cookie是存在于浏览器端的特性，所以cookie是可以被用户自由修改、伪造。</p>
<p>例：我们做的  <code>保持登录状态</code> 案例。我们保存的用户信息都一目了然的存在于浏览器。很不安全，如图：</p>
<p><img src="/2018/08/10/http、cookie、session/alrxu/1522984061061.png" alt=""></p>
<p>此时，我只要在电脑上随意修改，例如修改金额为<code>999999</code>，那么打开网站时也是<code>999999</code>。并且，其他人只要知道了你的用户名，那么也可以自行添加cookie，骗过服务器，直接访问<code>main.php</code>。</p>
<h4 id="3-2-session基本使用"><a href="#3-2-session基本使用" class="headerlink" title="3.2 session基本使用"></a>3.2 session基本使用</h4><p>如果要把原本cookie可以存的东西存在服务端，有一种技术叫session即可实现。</p>
<h5 id="3-2-1-session介绍"><a href="#3-2-1-session介绍" class="headerlink" title="3.2.1 session介绍"></a>3.2.1 session介绍</h5><p>​    session可以理解为是服务器上的一个保险柜，把所有数据都保存在服务器的保险柜里，只给浏览器一把钥匙用来访问这些数据。</p>
<p>如图：</p>
<p><img src="/2018/08/10/http、cookie、session/../alrxu/1522999966404.png" alt=""></p>
<p>由图，我们可知：数据都是存在服务器端，而浏览器端只存一把 <code>钥匙</code>。因为要把 <code>钥匙</code>给浏览器存起来，存钥匙的技术还是cookie，所以说session技术是基于cookie的。</p>
<h5 id="3-2-1-新增session语法："><a href="#3-2-1-新增session语法：" class="headerlink" title="3.2.1 新增session语法："></a>3.2.1 新增session语法：</h5><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//一定要先调用此函数开启session</span></span><br><span class="line">session_start();</span><br><span class="line"><span class="comment">//通过超全局变量添加一条session记录</span></span><br><span class="line">$_SESSION[<span class="string">'名'</span>]= 值;</span><br></pre></td></tr></table></figure>
<p>之前我们用cookie值一般都是给字符串，但是在session中，除了可以给基本类型，还可以给复杂数据类型</p>
<p>例：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//一定要先调用此函数开启session</span></span><br><span class="line">session_start();</span><br><span class="line"><span class="comment">//保存基本类型</span></span><br><span class="line">$_SESSION[<span class="string">'name'</span>] = <span class="string">'jack'</span>;</span><br><span class="line"><span class="comment">//保存复杂数据类型</span></span><br><span class="line">$_SESSION[<span class="string">'books'</span>] = <span class="keyword">array</span>(<span class="string">'C语言从入门到入土'</span>,<span class="string">'MySQL优化之道：从删库到跑路'</span>);</span><br></pre></td></tr></table></figure>
<p>注意：新增时一定要先使用   <code>session_start();</code> 开启session</p>
<h5 id="3-2-2-读取session语法"><a href="#3-2-2-读取session语法" class="headerlink" title="3.2.2 读取session语法"></a>3.2.2 读取session语法</h5><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//一定要先调用此函数开启session</span></span><br><span class="line">session_start();</span><br><span class="line"><span class="comment">//直接通过超全局变量可以取到session记录</span></span><br><span class="line">var_dump($_SESSION);</span><br><span class="line"><span class="comment">//单独取出某条$_SESSION记录</span></span><br><span class="line"><span class="keyword">echo</span> $_SESSION[<span class="string">'name'</span>];</span><br></pre></td></tr></table></figure>
<h5 id="3-2-3-修改session语法"><a href="#3-2-3-修改session语法" class="headerlink" title="3.2.3 修改session语法"></a>3.2.3 修改session语法</h5><p>直接对已经存在的session重新赋值就是修改</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 开启session</span></span><br><span class="line">session_start();</span><br><span class="line"><span class="comment">//修改</span></span><br><span class="line">$_SESSION[<span class="string">'name'</span>] = <span class="string">'rose'</span>;</span><br></pre></td></tr></table></figure>
<h5 id="3-2-4-删除session语法"><a href="#3-2-4-删除session语法" class="headerlink" title="3.2.4 删除session语法"></a>3.2.4 删除session语法</h5><p>使用 <code>unset</code>函数可以删除session</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 开启session</span></span><br><span class="line">session_start();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除保存的session</span></span><br><span class="line"><span class="comment">// 删除变量的值</span></span><br><span class="line"><span class="keyword">unset</span>($_SESSION[<span class="string">'name'</span>]);</span><br></pre></td></tr></table></figure>
<blockquote>
<p> 总结：只要是想操作session，请记得都要开启session</p>
</blockquote>
<h5 id="3-2-5-session关闭浏览器就删除了"><a href="#3-2-5-session关闭浏览器就删除了" class="headerlink" title="3.2.5 session关闭浏览器就删除了"></a>3.2.5 session关闭浏览器就删除了</h5>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://Alrxu.github.io/2018/08/10/http、cookie、session/" data-id="cjn9v9w1a000nv86xwondrlwu" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>
 


  
    <article id="post-文件上传中文编码、英雄列表" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/Alrxu.github.io/2018/08/02/文件上传中文编码、英雄列表/" class="article-date">
  <time datetime="2018-08-02T09:01:23.522Z" itemprop="datePublished">2018-08-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/Alrxu.github.io/2018/08/02/文件上传中文编码、英雄列表/">PHP上传中文文件时的编码问题</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h2 id="1-上传中文文件时的编码问题"><a href="#1-上传中文文件时的编码问题" class="headerlink" title="1.上传中文文件时的编码问题"></a>1.上传中文文件时的编码问题</h2><h3 id="1-1-问题描述"><a href="#1-1-问题描述" class="headerlink" title="1.1 问题描述"></a>1.1 问题描述</h3><ul>
<li>当我们写一个上传文件操作时，如果上传的文件时中文名，可能会存在乱码问题。</li>
<li>例：首页代码如下：</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"upload.php"</span> <span class="attr">method</span>=<span class="string">"POST"</span> <span class="attr">enctype</span>=<span class="string">"multipart/form-data"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">name</span>=<span class="string">"icon"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"上传"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>提交到upload.php，upload.php代码如下：</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//拿到临时文件位置</span></span><br><span class="line">    $tmp = $_FILES[<span class="string">'icon'</span>][<span class="string">'tmp_name'</span>];</span><br><span class="line">    <span class="comment">//拿到文件名</span></span><br><span class="line">    $name = $_FILES[<span class="string">'icon'</span>][<span class="string">'name'</span>];</span><br><span class="line"></span><br><span class="line">    <span class="comment">//使用文件移动函数移动到当前位置来</span></span><br><span class="line">    move_uploaded_file($tmp,<span class="string">'./'</span>.$name);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>我们可以看到，如果选择中文文件，例如上传下面这张图</li>
</ul>
<p><img src="/2018/08/02/文件上传中文编码、英雄列表/alrxu/1523519124645.png" alt=""></p>
<ul>
<li>则发现：<strong>文件名会变成乱码！</strong>，如图</li>
</ul>
<p><img src="/2018/08/02/文件上传中文编码、英雄列表/alrxu/1523519274015.png" alt=""></p>
<h3 id="1-2-原因解析"><a href="#1-2-原因解析" class="headerlink" title="1.2 原因解析"></a>1.2 原因解析</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">网页编码是UTF-8编码，通过使用utf-8字符集的网页在把文件名传过来时也是UTF-8的编码。但是phpStduy服务器使用的是中文windows系统，中文windows系统的内置字符集处理编码是GBK。所以当把UTF-8的编码的文件要写入到操作系统时，它会按照GBK的编码来写入。编码格式不对，自然出现乱码。</span><br></pre></td></tr></table></figure>
<h3 id="1-3-解决办法"><a href="#1-3-解决办法" class="headerlink" title="1.3 解决办法"></a>1.3 解决办法</h3><ul>
<li>只需要将UTF-8的文件名先转成GBK的文件名，就可以成功写入了。</li>
<li>需要用到  <code>iconv</code>  函数</li>
<li>用法：</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">转换后的结果 = iconv(<span class="string">'原编码格式'</span>,<span class="string">'转成什么编码格式'</span>,<span class="string">'转什么内容'</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>解析：<ul>
<li>参数1：传入原本的编码格式，传字符串</li>
<li>参数2：传入目标编码格式，也是字符串</li>
<li>参数3：转什么内容</li>
<li>返回值：会把转换的内容按照目标编码格式转换后当返回值返回。</li>
</ul>
</li>
</ul>
<ul>
<li>最终代码为：</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//拿到临时文件位置</span></span><br><span class="line">    $tmp = $_FILES[<span class="string">'icon'</span>][<span class="string">'tmp_name'</span>];</span><br><span class="line">    <span class="comment">//拿到文件名</span></span><br><span class="line">    $name = $_FILES[<span class="string">'icon'</span>][<span class="string">'name'</span>];</span><br><span class="line"></span><br><span class="line">    <span class="comment">//转换成GBK的文件名</span></span><br><span class="line">    $newName = iconv(<span class="string">'utf-8'</span>,<span class="string">'gbk'</span>,$name);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//使用文件移动函数移动到当前位置来</span></span><br><span class="line">    move_uploaded_file($tmp,<span class="string">'./'</span>.$newName);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://Alrxu.github.io/2018/08/02/文件上传中文编码、英雄列表/" data-id="cjn9v9vxo000gv86xg4bqyq06" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>
 


  
    <article id="post-MySQL数据库" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/Alrxu.github.io/2018/08/01/MySQL数据库/" class="article-date">
  <time datetime="2018-08-01T08:46:56.210Z" itemprop="datePublished">2018-08-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/Alrxu.github.io/2018/08/01/MySQL数据库/">PHP、MySQL操作数据库</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h2 id="MySQL数据库"><a href="#MySQL数据库" class="headerlink" title="MySQL数据库"></a>MySQL数据库</h2><h3 id="1-数据库作用"><a href="#1-数据库作用" class="headerlink" title="1. 数据库作用"></a>1. 数据库作用</h3><h4 id="1-1-什么是数据库"><a href="#1-1-什么是数据库" class="headerlink" title="1.1 什么是数据库"></a>1.1 什么是数据库</h4><ul>
<li>数据库就是存数据的仓库。它能方便的让程序员保存数据、管理数据和共享数据。</li>
</ul>
<h4 id="1-2-为什么需要数据库？"><a href="#1-2-为什么需要数据库？" class="headerlink" title="1.2 为什么需要数据库？"></a>1.2 为什么需要数据库？</h4><ul>
<li>文件形式管理数据有以下缺点：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.用文件形式保存数据，不安全，任何人能方便打开和修改删除</span><br><span class="line">2.所有对数据的操作不会留下记录，不知道是谁操作的</span><br><span class="line">3.不方便检索信息</span><br><span class="line">4.其他各种不便，不多枚举</span><br></pre></td></tr></table></figure>
<ul>
<li>数据库系统，就能方便解决上述问题。</li>
</ul>
<ul>
<li>常见数据库系统有：MySQL、Oracle、SQLServer等</li>
</ul>
<h3 id="2-MySQL管理界面"><a href="#2-MySQL管理界面" class="headerlink" title="2. MySQL管理界面"></a>2. MySQL管理界面</h3><h4 id="2-1-打开界面"><a href="#2-1-打开界面" class="headerlink" title="2.1 打开界面"></a>2.1 打开界面</h4><ul>
<li>打开PHPStudy，然后点  <code>MySQL管理器</code>，在弹出的界面中选  <code>MySQL-Front</code></li>
<li>如图：</li>
</ul>
<p><img src="/2018/08/01/MySQL数据库/../alrxu/1521106935950.png" alt=""></p>
<ul>
<li>弹出的界面点打开即可</li>
</ul>
<p><img src="/2018/08/01/MySQL数据库/alrxu/1521107193552.png" alt=""></p>
<h4 id="2-2-新建数据库"><a href="#2-2-新建数据库" class="headerlink" title="2.2 新建数据库"></a>2.2 新建数据库</h4><ul>
<li>打开后，右键localhost，然后依次选新建、数据库。    </li>
</ul>
<p><img src="/2018/08/01/MySQL数据库/../alrxu/1521107792307.png" alt=""></p>
<ul>
<li>输入数据库名字，再点确定就好。<strong>注意：请使用英文名字。</strong></li>
</ul>
<p><img src="/2018/08/01/MySQL数据库/../alrxu/1521107831420.png" alt=""></p>
<h4 id="2-3-数据表"><a href="#2-3-数据表" class="headerlink" title="2.3 数据表"></a>2.3 数据表</h4><h5 id="2-3-1-建表"><a href="#2-3-1-建表" class="headerlink" title="2.3.1 建表"></a>2.3.1 建表</h5><ul>
<li>为了更好的对数据进行分类，数据库提供了  <code>数据表</code>   。方便对这些数据归类。可以把  <code>数据表</code>  理解为一个  <code>表格</code>（如下图）。    </li>
</ul>
<p><img src="/2018/08/01/MySQL数据库/../alrxu/1521193633169.png" alt=""></p>
<ul>
<li>建表步骤</li>
<li><img src="/2018/08/01/MySQL数据库/../alrxu/1521108452061.png" alt=""></li>
</ul>
<ul>
<li>新建一个叫user的数据表，专门用来存每个用户的信息。</li>
</ul>
<h5 id="2-3-2-字段"><a href="#2-3-2-字段" class="headerlink" title="2.3.2 字段"></a>2.3.2 字段</h5><ul>
<li>建好表后，有一块区域叫  <code>字段</code></li>
<li>字段可以理解为是表格中的列名</li>
</ul>
<p><img src="/2018/08/01/MySQL数据库/../alrxu/1521109108318.png" alt=""></p>
<ul>
<li>添加字段如图：</li>
</ul>
<p><img src="/2018/08/01/MySQL数据库/../alrxu/1521109361025.png" alt=""></p>
<p><img src="/2018/08/01/MySQL数据库/../alrxu/1521109462213.png" alt=""></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">说明：</span><br><span class="line">	1. 字段名可以理解为就是列名</span><br><span class="line">	2. 类型根据实际情况选择对应类型，例如姓名一般是字符串，在数据库中选择VarChar（数据库中字符串类型）</span><br><span class="line">	3. 长度就是说字符串最多允许多少位，长度越小，占用空间越小。（我们用默认长度即可）</span><br></pre></td></tr></table></figure>
<ul>
<li>然后再依次加  <code>age</code>  和  <code>description</code>  两个字段。</li>
</ul>
<h5 id="2-3-3-插入一条数据"><a href="#2-3-3-插入一条数据" class="headerlink" title="2.3.3 插入一条数据"></a>2.3.3 插入一条数据</h5><ul>
<li>点中间的  <code>数据浏览器</code></li>
</ul>
<p><img src="/2018/08/01/MySQL数据库/../alrxu/1521422841677.png" alt=""></p>
<ul>
<li>下图类似表格的界面就是新增数据的地方。</li>
</ul>
<p><img src="/2018/08/01/MySQL数据库/../alrxu/1521422895402.png" alt=""></p>
<ul>
<li>我们只在  <code>name</code>，<code>age</code>，<code>description</code> 字段下加数据(Id不加，自动生成)</li>
</ul>
<p><img src="/2018/08/01/MySQL数据库/../alrxu/1521422959029.png" alt=""></p>
<ul>
<li>插入新纪录：对着任意记录  <code>右键</code>，再点  <code>插入新纪录</code>  即可</li>
</ul>
<p><img src="/2018/08/01/MySQL数据库/../alrxu/1521164433540.png" alt=""></p>
<ul>
<li>插入完成，如图</li>
</ul>
<p><img src="/2018/08/01/MySQL数据库/../alrxu/1521164509269.png" alt=""></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">结论：</span><br><span class="line">	1. Id这个字段里是自动生成的依次递增的整数。</span><br><span class="line">	2. Id字段的作用就是作为某条数据的身份证,用来区分不同的数据</span><br></pre></td></tr></table></figure>
<h3 id="3-SQL语句"><a href="#3-SQL语句" class="headerlink" title="3. SQL语句"></a>3. SQL语句</h3><h4 id="3-1-SQL语句介绍"><a href="#3-1-SQL语句介绍" class="headerlink" title="3.1 SQL语句介绍"></a>3.1 SQL语句介绍</h4><blockquote>
<p>SQL语言，是一种专门对数据库进行操作的语言。</p>
</blockquote>
<h4 id="3-2-增删查改语句"><a href="#3-2-增删查改语句" class="headerlink" title="3.2 增删查改语句"></a>3.2 增删查改语句</h4><ul>
<li>增：新增记录    </li>
</ul>
<ul>
<li>删：删除记录</li>
</ul>
<ul>
<li>查：查询记录</li>
</ul>
<ul>
<li>改：修改记录</li>
</ul>
<h5 id="3-2-2-insert语句"><a href="#3-2-2-insert语句" class="headerlink" title="3.2.2 insert语句"></a>3.2.2 insert语句</h5><blockquote>
<p> insert语句对应的是“增”，也即新增数据</p>
</blockquote>
<ul>
<li>基本用法：</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> 表名(字段名) <span class="keyword">values</span>(值);</span><br></pre></td></tr></table></figure>
<ul>
<li>例：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into user(name,age,desc) values(&apos;andy&apos;,20,&apos;打酱油的&apos;);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>代表给user表新增一条数据，name的值为andy，age的值为20。</p>
</blockquote>
<h5 id="3-2-3-delete语句"><a href="#3-2-3-delete语句" class="headerlink" title="3.2.3 delete语句"></a>3.2.3 delete语句</h5><blockquote>
<p>delete语句对应的是“删”，也即删除数据</p>
</blockquote>
<ul>
<li>用法（慎用）：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">delete from 表名;</span><br></pre></td></tr></table></figure>
<ul>
<li>例：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">delete from user;</span><br></pre></td></tr></table></figure>
<ul>
<li>执行完后，数据全没了</li>
</ul>
<blockquote>
<p> 结论：delete语句默认会删除表格中的所有数据，要 <code>慎用</code> </p>
</blockquote>
<ul>
<li>按条件删除，用法：（常用）</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">delete from 表名 where 字段 = 某个值;</span><br></pre></td></tr></table></figure>
<ul>
<li>例：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">delete from user where id = 2;</span><br></pre></td></tr></table></figure>
<blockquote>
<p> 说明：这代表删除user表下，id为2的那条记录</p>
</blockquote>
<ul>
<li>也可以按范围删除，例：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">delete from user where id &lt;= 3;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>说明：这代表删除user表下，id小于或等于3的那些记录</p>
</blockquote>
<h5 id="3-2-4-select语句"><a href="#3-2-4-select语句" class="headerlink" title="3.2.4 select语句"></a>3.2.4 select语句</h5><blockquote>
<p>select语句对应的是“查”，即查询记录</p>
</blockquote>
<p><strong>指定查询某些字段</strong></p>
<ul>
<li>用法：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select 字段 from 表名;</span><br></pre></td></tr></table></figure>
<ul>
<li>例：</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">name</span>,age <span class="keyword">from</span> <span class="keyword">user</span>;</span><br></pre></td></tr></table></figure>
<p>说明：这会查询出user表下所有数据，只会包含<code>name</code>和<code>age</code>字段。如果还有其他字段，结果中不会包含。</p>
<p><strong>查询所有字段</strong></p>
<ul>
<li>用法：</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> 表名;</span><br></pre></td></tr></table></figure>
<ul>
<li>例：</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">user</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p> 默认会查询出表中的所有数据，如果想指定条件查询，也可以在后面加  <code>where</code></p>
</blockquote>
<ul>
<li>例：</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">user</span> <span class="keyword">where</span> <span class="keyword">id</span> &lt; <span class="number">10</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p> 说明：只查询出id小于10的数据，不包括10</p>
</blockquote>
<h5 id="3-2-5-update语句"><a href="#3-2-5-update语句" class="headerlink" title="3.2.5 update语句"></a>3.2.5 update语句</h5><blockquote>
<p>update语句对应的是“改”，也即修改某条数据</p>
</blockquote>
<ul>
<li>用法（慎用）：</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> 表名 <span class="keyword">set</span> 字段 = 新值;</span><br></pre></td></tr></table></figure>
<ul>
<li>例：</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> <span class="keyword">user</span> <span class="keyword">set</span> <span class="keyword">name</span> = <span class="string">'黑马一哥'</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p> 说明：把user表中所有数据的name值改为黑马一哥，注意，此操作是修改所有，所以要小心使用！</p>
</blockquote>
<ul>
<li>指定条件修改，例：</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> <span class="keyword">user</span> <span class="keyword">set</span> <span class="keyword">name</span> = <span class="string">'黑马一哥'</span> <span class="keyword">where</span> <span class="keyword">id</span> = <span class="number">3</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p> 只修改id为3的这条数据，把name改成黑马一哥</p>
</blockquote>
<h3 id="4-PHP操作数据库"><a href="#4-PHP操作数据库" class="headerlink" title="4. PHP操作数据库"></a>4. PHP操作数据库</h3><h4 id="4-1-为什么需要"><a href="#4-1-为什么需要" class="headerlink" title="4.1 为什么需要"></a>4.1 为什么需要</h4><blockquote>
<p> 之前我们学的语句都是在MySQL自己的管理界面上操作，但有的时候我们需要在界面上显示一些数据</p>
<p> 如下图所示：</p>
</blockquote>
<p><img src="/2018/08/01/MySQL数据库/../alrxu/1521185431950.png" alt=""></p>
<p>​    </p>
<h4 id="4-2-连接数据库的步骤"><a href="#4-2-连接数据库的步骤" class="headerlink" title="4.2 连接数据库的步骤"></a>4.2 连接数据库的步骤</h4><ul>
<li><p>PHP操作数据库，其实也主要分为三大步：</p>
<ul>
<li>建立数据库连接</li>
<li>操作数据库（增删改查）</li>
<li>关闭数据库连接</li>
</ul>
<p>​</p>
</li>
</ul>
<h4 id="4-3-建立数据库连接"><a href="#4-3-建立数据库连接" class="headerlink" title="4.3 建立数据库连接"></a>4.3 建立数据库连接</h4><ul>
<li>语法：</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqli_connect(<span class="string">'数据库地址'</span>,<span class="string">'账号'</span>,<span class="string">'密码'</span>,<span class="string">'数据名'</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>参数解释：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">参数1：数据库的ip地址</span><br><span class="line">参数2：数据库管理的账号</span><br><span class="line">参数3：数据库管理的密码</span><br><span class="line">参数4：数据库名，因为一个数据库服务器里可能有很多数据库，你需要告诉它连接哪个数据库的</span><br></pre></td></tr></table></figure>
<ul>
<li>例：</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$link = mysqli_connect(<span class="string">'127.0.0.1'</span>,<span class="string">'root'</span>,<span class="string">'root'</span>,<span class="string">'manage'</span>);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>使用完此函数后，会有一个返回值，如果返回值为false代表连接失败</p>
<p>如果返回值不为false，那么会打印一个类似下图的数据</p>
</blockquote>
<p><img src="/2018/08/01/MySQL数据库/alrxu/1521188128269.png" alt="">这个返回值我们一般叫  <code>连接通道</code>，这个  <code>连接通道</code>  里面的内容是什么我们不需要关心，只需要知道，<code>连接通道</code>里包含了本次连接的各种信息，只要不是false就代表数据库连接成功。</p>
<p><img src="/2018/08/01/MySQL数据库/../alrxu/1524907078565.png" alt=""></p>
<h4 id="4-4-操作数据库"><a href="#4-4-操作数据库" class="headerlink" title="4.4 操作数据库"></a>4.4 操作数据库</h4><ul>
<li>语法：</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqli_query(连接通道，SQL语句);</span><br></pre></td></tr></table></figure>
<h5 id="4-4-1-查询数据"><a href="#4-4-1-查询数据" class="headerlink" title="4.4.1 查询数据"></a>4.4.1 查询数据</h5><ul>
<li>例：</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$result =  mysqli_query($link,<span class="string">"select * from user"</span>);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>说明：</p>
<p>​    这句话执行完后会得到一个结果，结果包含了查询得到的数据，我们用一个变量    <code>$result</code>  接收</p>
<p>但是，这个返回值我们不能直接拿来用，还需要用一个  <code>解析函数</code>  来把数据解析出来</p>
</blockquote>
<ul>
<li>用法：</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqli_fetch_all(查询结果,MYSQLI_ASSOC);</span><br></pre></td></tr></table></figure>
<ul>
<li>例：</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$users = mysqli_fetch_all($result,MYSQLI_ASSOC);</span><br></pre></td></tr></table></figure>
<p>说明：</p>
<ul>
<li>参数1：我们传之前用<code>mysqli_query</code>函数查询到的结果</li>
<li>参数2：固定写  <code>MYSQLI_ASSOC</code>   ，如果记不住，就写 <code>1</code>。</li>
</ul>
<blockquote>
<p> 函数执行后，会把结果转成一个关联型数组。这样，我们要的数据就比较明确了。</p>
<p> 注：参数2如果不传  <code>MYSQLI_ASSOC</code>，得到的会是一个普通数组，那样我们取数据时只能根据下标来取。</p>
</blockquote>
<h5 id="4-4-2-增、删、改数据"><a href="#4-4-2-增、删、改数据" class="headerlink" title="4.4.2 增、删、改数据"></a>4.4.2 增、删、改数据</h5><blockquote>
<p>增、删、改数据，也是用  <code>mysqli_query</code>  这个函数操作。只不过把SQL语句换成对应的语句</p>
</blockquote>
<ul>
<li>增加：</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$rows = mysqli_query($link,<span class="string">'insert into user(name,age,desc) values("新人",16,"新增加的一条数据")'</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>删除：</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$rows = mysqli_query($link,<span class="string">'delete from user where id=2'</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>修改：</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$rows = mysqli_query($link,<span class="string">'update user set name="修改",age=18,desc="我被改了" where id=2'</span>);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>因为增、删、改不是为了获取结果，所以此时  <code>mysqli_query</code>  的返回值不再会是一堆数据，而是获得受影响的行数，我们根据受影响的行数是否大于0，就可以知道是否操作成功</p>
</blockquote>
<ul>
<li>用法：</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>($rows &gt; <span class="number">0</span>)&#123;</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">"登录成功!"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="4-5-关闭数据库连接"><a href="#4-5-关闭数据库连接" class="headerlink" title="4.5 关闭数据库连接"></a>4.5 关闭数据库连接</h4><blockquote>
<p> 无论你是做增删查改中的哪一种，请记得最后一定要关闭数据库连接！</p>
</blockquote>
<ul>
<li>用法：</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqli_close($link);</span><br></pre></td></tr></table></figure>
<blockquote>
<p> 注意：请记得一定要关闭数据库连接，否则会占用服务器资源。</p>
</blockquote>
<h3 id="5-PHP操作数据库步骤的封装"><a href="#5-PHP操作数据库步骤的封装" class="headerlink" title="5. PHP操作数据库步骤的封装"></a>5. PHP操作数据库步骤的封装</h3><blockquote>
<p>无论做增、删还是改，代码都是一样的，唯一不同的是SQL语句不同。</p>
<p>为了以后用起来方便和节省代码量，可以把增、删、改的代码封装成函数。</p>
</blockquote>
<h4 id="5-1-增、删、改封装"><a href="#5-1-增、删、改封装" class="headerlink" title="5.1 增、删、改封装"></a>5.1 增、删、改封装</h4><ul>
<li>代码如下：</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">my_Excute</span><span class="params">($sql)</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 连接数据库</span></span><br><span class="line">    $link = mysqli_connect(<span class="string">'127.0.0.1'</span>, <span class="string">'root'</span>, <span class="string">'root'</span>, <span class="string">'study'</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 执行sql语句</span></span><br><span class="line">    mysqli_query($link, $sql);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取受影响的行数</span></span><br><span class="line">    $rowNum = mysqli_affected_rows($link);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 关闭连接</span></span><br><span class="line">    mysqli_close($link);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 返回行数</span></span><br><span class="line">    <span class="keyword">return</span> $rowNum;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>数据库的IP、用户名、密码也该当参数传进来</p>
</blockquote>
<h4 id="5-2-查询数据的封装"><a href="#5-2-查询数据的封装" class="headerlink" title="5.2 查询数据的封装"></a>5.2 查询数据的封装</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">my_Query</span><span class="params">($sql)</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 连接数据库</span></span><br><span class="line">    $link = mysqli_connect(<span class="string">'127.0.0.1'</span>, <span class="string">'root'</span>, <span class="string">'root'</span>, <span class="string">'study'</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 执行sql语句</span></span><br><span class="line">    $result = mysqli_query($link, $sql);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 解析数据</span></span><br><span class="line">    $data = mysqli_fetch_all($result);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 关闭连接</span></span><br><span class="line">    mysqli_close($link);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 返回行数</span></span><br><span class="line">    <span class="keyword">return</span> $data;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="6-条件查询"><a href="#6-条件查询" class="headerlink" title="6. 条件查询"></a>6. 条件查询</h3><h4 id="6-1-通配符–-gt-模糊查询"><a href="#6-1-通配符–-gt-模糊查询" class="headerlink" title="6.1 通配符–&gt;模糊查询"></a>6.1 通配符–&gt;模糊查询</h4><blockquote>
<p><code>%</code>为通配符，一般搭配 <code>like</code> 关键字使用。</p>
</blockquote>
<h5 id="6-1-1-以什么开头"><a href="#6-1-1-以什么开头" class="headerlink" title="6.1.1 以什么开头"></a>6.1.1 以什么开头</h5><ul>
<li>查询所有  <code>字段</code>  以 <code>关键字</code>  开头的数据</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from 表名 where 字段 like &apos;关键字%&apos;;</span><br></pre></td></tr></table></figure>
<ul>
<li>例：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 查询user表中name以j开头的所有数据</span><br><span class="line">select *from user where name like &apos;j%&apos;;</span><br></pre></td></tr></table></figure>
<h5 id="6-1-2-以什么结尾"><a href="#6-1-2-以什么结尾" class="headerlink" title="6.1.2 以什么结尾"></a>6.1.2 以什么结尾</h5><ul>
<li>查询所有  <code>字段</code>  以 <code>关键字</code> 结尾的数据</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from 表名 where 字段 like &apos;%关键字&apos;&apos;;</span><br></pre></td></tr></table></figure>
<ul>
<li>例：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 查询user表中name以y结尾的所有数据</span><br><span class="line">select *from user where name like &apos;%y&apos;;</span><br></pre></td></tr></table></figure>
<h5 id="6-1-3-包含什么内容"><a href="#6-1-3-包含什么内容" class="headerlink" title="6.1.3 包含什么内容"></a>6.1.3 包含什么内容</h5><ul>
<li>查询所有  <code>字段</code>  包含 <code>关键字</code> 的数据</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from 表名 where 字段 like &apos;%关键字%&apos;;</span><br></pre></td></tr></table></figure>
<ul>
<li>例:</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 查询user表中name中包含o的所有数据</span><br><span class="line">select *from user where name like &apos;%o%&apos;;</span><br></pre></td></tr></table></figure>
<h4 id="6-2-并且条件"><a href="#6-2-并且条件" class="headerlink" title="6.2 并且条件"></a>6.2 并且条件</h4><ul>
<li>使用and关键字，例：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 查询user表中name为jack，并且age为20的数据</span><br><span class="line">select *from user where name=&apos;jack&apos; and age=&apos;20&apos;</span><br></pre></td></tr></table></figure>
<h4 id="6-3-或者条件"><a href="#6-3-或者条件" class="headerlink" title="6.3 或者条件"></a>6.3 或者条件</h4><ul>
<li>使用or关键字，例</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 找到user表中age小于10，或者age大于100的数据</span><br><span class="line">select *from user where age &lt; 10 or age &gt; 100;</span><br></pre></td></tr></table></figure>
<h4 id="6-4-连表查询"><a href="#6-4-连表查询" class="headerlink" title="6.4 连表查询"></a>6.4 连表查询</h4><ul>
<li>很多时候同一个页面的数据是从多张表取出</li>
<li>例如：如果想展示所有用户的信息以及它下的订单商品，就需要找到两张表的数据联合起来。</li>
<li>如图：</li>
</ul>
<p><img src="/2018/08/01/MySQL数据库/../alrxu/1525174423451.png" alt=""></p>
<blockquote>
<p>我们首先会想到，把两张表一起查，但这样做不会得到正确结果，例：</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select *from customer ,horder;</span><br></pre></td></tr></table></figure>
<ul>
<li>结果如图：</li>
</ul>
<p><img src="/2018/08/01/MySQL数据库/../alrxu/1525180415087.png" alt=""></p>
<blockquote>
<p>这相当于把两表的所有记录都联了一次（这叫交叉连接），如图说明</p>
</blockquote>
<p><img src="/2018/08/01/MySQL数据库/../alrxu/1525180610588.png" alt=""></p>
<ul>
<li>如果要起到左表张三，只跟右表属于张三的记录连接起来，我们需要用  <code>inner join ... on</code>   关键字</li>
<li>语法：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select 字段 from 表1 inner join 表2 on 对应关系</span><br></pre></td></tr></table></figure>
<ul>
<li>例:</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 找到customer和horder双表结合的结果，只把customer中的cId字段和horder表中custormId字段相等的记录组合在一起</span><br><span class="line">select *from customer inner join horder on customer.cId =  horder.custormId</span><br></pre></td></tr></table></figure>
<ul>
<li>如果觉得表名太长，可以给表名起别名，例：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select *from customer c inner join horder h on c.cId =  h.custormId</span><br></pre></td></tr></table></figure>
<h4 id="6-5-分页查询"><a href="#6-5-分页查询" class="headerlink" title="6.5 分页查询"></a>6.5 分页查询</h4><ul>
<li>有时候某张表里有大量数据，而我们只需要查中间的某几条，因此可以用下面的分页查询语句</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from 表名 limit 第几条开始,查几条;</span><br></pre></td></tr></table></figure>
<ul>
<li>例：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 查询person表里第10条到第20条数据（一共查出来10条）</span><br><span class="line">select * from person limit 10,10;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>思考：为什么不直接用id&gt;= 10 and id&lt;20的写法 </p>
</blockquote>
<h4 id="6-6-建表SQL语句"><a href="#6-6-建表SQL语句" class="headerlink" title="6.6 建表SQL语句"></a>6.6 建表SQL语句</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE 表名称</span><br><span class="line">(</span><br><span class="line">	列名称1 数据类型,</span><br><span class="line">	列名称2 数据类型,</span><br><span class="line">	列名称3 数据类型,</span><br><span class="line">	....</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="7-参考"><a href="#7-参考" class="headerlink" title="7.参考"></a>7.参考</h3><p> <a href="程序员的SQL金典.pdf">程序员的SQL金典</a> （按ctrl+鼠标左键）</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://Alrxu.github.io/2018/08/01/MySQL数据库/" data-id="cjn9v9vya000jv86xom3p2toi" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>
 


  
    <article id="post-表单与服务器交互" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/Alrxu.github.io/2018/07/21/表单与服务器交互/" class="article-date">
  <time datetime="2018-07-21T07:41:11.810Z" itemprop="datePublished">2018-07-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/Alrxu.github.io/2018/07/21/表单与服务器交互/">PHP表单与服务器交互</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h1 id="表单与服务器交互"><a href="#表单与服务器交互" class="headerlink" title="表单与服务器交互"></a>表单与服务器交互</h1><h2 id="1-表单与服务器交互初体验"><a href="#1-表单与服务器交互初体验" class="headerlink" title="1. 表单与服务器交互初体验"></a>1. 表单与服务器交互初体验</h2><h3 id="1-1-表单介绍"><a href="#1-1-表单介绍" class="headerlink" title="1.1 表单介绍"></a>1.1 表单介绍</h3><ul>
<li>表单，即<code>form</code>标签</li>
<li>它可以包含文本框、复选框、单选框、提交按钮等。</li>
<li>作用：向服务器提交一段数据。</li>
</ul>
<h3 id="1-2-表单语法"><a href="#1-2-表单语法" class="headerlink" title="1.2 表单语法"></a>1.2 表单语法</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">'地址'</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 表单元素列表 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>说明：</p>
</blockquote>
<ul>
<li>表单元素列表里可以写文本框、密码框等一切你希望用户输入的数据。</li>
<li>一般情况下表单元素列表的最后会写个  <code>submit</code>  提交按钮，<code>submit</code>  标签不用写任何JS代码就可以在它被点击后把表单里的内容传给服务器。</li>
</ul>
<blockquote>
<p>例：</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">&lt;!-- action填的是地址，代表提交到哪个服务器页面 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"./result.php"</span>&gt;</span></span><br><span class="line">     <span class="comment">&lt;!-- 此文本框加了name属性，不加name属性无法把它的数据提交到服务器 --&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"star"</span> <span class="attr">placeholder</span>=<span class="string">"请输入你喜欢的明星！"</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：只有加了name属性的才能提交到服务器</p>
</blockquote>
<h3 id="1-3-action属性"><a href="#1-3-action属性" class="headerlink" title="1.3 action属性"></a>1.3 action属性</h3><ul>
<li>表单数据提交到哪。</li>
</ul>
<blockquote>
<p>例： action=”./result.php”  即把表单提交到同目录下的 <code>result.php</code> 文件</p>
</blockquote>
<h3 id="1-4-服务端拿到表单提交的数据"><a href="#1-4-服务端拿到表单提交的数据" class="headerlink" title="1.4 服务端拿到表单提交的数据"></a>1.4 服务端拿到表单提交的数据</h3><h4 id="1-4-1-超全局变量"><a href="#1-4-1-超全局变量" class="headerlink" title="1.4.1 超全局变量"></a>1.4.1 超全局变量</h4><ul>
<li>就是一个默认存在的变量，类似于JS中的window</li>
<li>不需要声明，直接可以用</li>
</ul>
<h4 id="1-4-2-GET变量"><a href="#1-4-2-GET变量" class="headerlink" title="1.4.2 $_GET变量"></a>1.4.2 $_GET变量</h4><ul>
<li>是一个超全局变量</li>
<li>能拿到默认情况下表单传递过来的数据</li>
</ul>
<blockquote>
<p>语法：</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$_GET[<span class="string">'key'</span>];</span><br></pre></td></tr></table></figure>
<blockquote>
<p>例：</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$_GET[<span class="string">'star'</span>]; <span class="comment">//拿到表单提交过来的数据中name为star元素的值</span></span><br></pre></td></tr></table></figure>
<h4 id="1-4-3-图解"><a href="#1-4-3-图解" class="headerlink" title="1.4.3 图解"></a>1.4.3 图解</h4><p><img src="/2018/07/21/表单与服务器交互/../alrxu/1524820606076.png" alt=""></p>
<h4 id="1-4-4-判断数据是否存在"><a href="#1-4-4-判断数据是否存在" class="headerlink" title="1.4.4 判断数据是否存在"></a>1.4.4 判断数据是否存在</h4><h5 id="1-4-4-1-写了不存在的key会报错"><a href="#1-4-4-1-写了不存在的key会报错" class="headerlink" title="1.4.4.1 写了不存在的key会报错"></a>1.4.4.1 写了不存在的key会报错</h5><blockquote>
<p>接上例，如果我不小心把  <code>$_GET</code>  里的key写错了，写成如下</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$_GET[<span class="string">'star2'</span>];<span class="comment">//提交来的没有name为start2的数据</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>引发下图报错</p>
</blockquote>
<p><img src="/2018/07/21/表单与服务器交互/../alrxu/1524821156629.png" alt=""></p>
<h5 id="1-4-4-2-isset使用"><a href="#1-4-4-2-isset使用" class="headerlink" title="1.4.4.2 isset使用"></a>1.4.4.2 isset使用</h5><ul>
<li>isset可以用来判断是否存在某个值</li>
</ul>
<blockquote>
<p>语法：</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">isset</span>(变量);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>例：</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">isset</span>($_GET[<span class="string">'star'</span>]);   <span class="comment">//判断$_GET中是否有以star为key的值，如果有返回true,如果没有返回false</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>修改上例的 <code>result.php</code> 代码</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置编码</span></span><br><span class="line">    header(<span class="string">'content-type:text/html;charset=utf-8'</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">isset</span>($_GET[<span class="string">'star'</span>]))&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//取到name为star的值</span></span><br><span class="line">        $value = $_GET[<span class="string">'star'</span>];</span><br><span class="line">    </span><br><span class="line">        <span class="comment">//拼接字符串并输出</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"原来你喜欢"</span>.$value;</span><br><span class="line"></span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">'数据有误'</span>;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="2-get请求和post请求"><a href="#2-get请求和post请求" class="headerlink" title="2.get请求和post请求"></a>2.get请求和post请求</h2><h3 id="2-1-get请求"><a href="#2-1-get请求" class="headerlink" title="2.1 get请求"></a>2.1 get请求</h3><h4 id="2-1-1-get请求介绍"><a href="#2-1-1-get请求介绍" class="headerlink" title="2.1.1 get请求介绍"></a>2.1.1 get请求介绍</h4><ul>
<li>以网址的形式把数据提交到服务器，叫get请求</li>
</ul>
<h4 id="2-1-2-用get请求做登录"><a href="#2-1-2-用get请求做登录" class="headerlink" title="2.1.2 用get请求做登录"></a>2.1.2 用get请求做登录</h4><ul>
<li>界面代码如下：</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 一个账号框，一个密码框，加一个登录按钮,提交到login.php --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"login.php"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">'id'</span> <span class="attr">placeholder</span>=<span class="string">"请输入账号"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">'pwd'</span> <span class="attr">placeholder</span>=<span class="string">"请输入密码"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">'登录'</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>login.php 代码如下：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">  &lt;?php</span><br><span class="line">    //拿到传递过来的账号和密码</span><br><span class="line">    $id = $_GET[&apos;id&apos;];</span><br><span class="line">    $pwd = $_GET[&apos;pwd&apos;];</span><br><span class="line">//判断账号是否正确</span><br><span class="line">if($id==&apos;admin&apos; &amp;&amp; $pwd==&apos;123456&apos;):</span><br><span class="line">  ?&gt;</span><br><span class="line">      &lt;!-- 如果正确显示欢迎信息 --&gt;</span><br><span class="line">  	&lt;h3&gt;欢迎登录：&lt;?php echo $id; ?&gt;&lt;/h3&gt;</span><br><span class="line">  &lt;?php else: ?&gt;</span><br><span class="line">   &lt;!-- 如果错误 --&gt;</span><br><span class="line">       &lt;h3&gt;账号或密码错误，请重新登录！&lt;/h3&gt;</span><br><span class="line">  &lt;?php endif; ?&gt;</span><br></pre></td></tr></table></figure>
<h4 id="2-1-3-get请求缺点"><a href="#2-1-3-get请求缺点" class="headerlink" title="2.1.3 get请求缺点"></a>2.1.3 get请求缺点</h4><ul>
<li>网址有大小限制，而get请求就是通过浏览器发送数据，所以get请求不适合发送图片等大数据</li>
<li>所有发送的数据都明文显示在网址上，相对不安全，如下图：</li>
</ul>
<p><img src="/2018/07/21/表单与服务器交互/../alrxu/1520844955001.png" alt=""></p>
<h3 id="2-2-post请求"><a href="#2-2-post请求" class="headerlink" title="2.2 post请求"></a>2.2 post请求</h3><p>####2.2.1 post请求介绍</p>
<ul>
<li>post请求提交的数据在网址上看不到</li>
<li>post能更好的提交图片等大数据</li>
</ul>
<ul>
<li>form表单，默认采用的是get请求</li>
<li>要用post请求，需要设置</li>
</ul>
<blockquote>
<p>给form表单 加method属性，并指定为post，即为post请求</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">'网址'</span> <span class="attr">method</span>=<span class="string">'post'</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="2-2-2-用post请求做登录"><a href="#2-2-2-用post请求做登录" class="headerlink" title="2.2.2 用post请求做登录"></a>2.2.2 用post请求做登录</h4><ul>
<li>界面代码如下</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- post请求 --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"login.php"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">'id'</span> <span class="attr">placeholder</span>=<span class="string">"请输入账号"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">'pwd'</span> <span class="attr">placeholder</span>=<span class="string">"请输入密码"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">'登录'</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li><code>login.php</code>  的代码如果暂时不变，再点登录会报错</li>
</ul>
<p><img src="/2018/07/21/表单与服务器交互/../alrxu/1520845815057.png" alt=""></p>
<ul>
<li>原因：<ul>
<li>之前浏览器提交过来的数据是get请求的，所以用<code>$_GET</code>这个超全局变量</li>
</ul>
</li>
<li>用  <code>$_POST</code>  可以拿到post请求提交来的数据</li>
</ul>
<p><code>login.php</code>代码如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">  &lt;?php</span><br><span class="line">    //拿到传递过来的账号和密码</span><br><span class="line">    $id = $_POST[&apos;id&apos;];</span><br><span class="line">    $pwd = $_POST[&apos;pwd&apos;];</span><br><span class="line">//判断账号是否正确</span><br><span class="line">if($id==&apos;admin&apos; &amp;&amp; $pwd==&apos;123456&apos;):</span><br><span class="line">  ?&gt;</span><br><span class="line">      &lt;!-- 如果正确显示欢迎信息 --&gt;</span><br><span class="line">  	&lt;h3&gt;欢迎登录：&lt;?php echo $id; ?&gt;&lt;/h3&gt;</span><br><span class="line">  &lt;?php else: ?&gt;</span><br><span class="line">   &lt;!-- 如果错误 --&gt;</span><br><span class="line">       &lt;h3&gt;账号或密码错误，请重新登录！&lt;/h3&gt;</span><br><span class="line">  &lt;?php endif; ?&gt;</span><br></pre></td></tr></table></figure>
<h3 id="2-3-get和post总结"><a href="#2-3-get和post总结" class="headerlink" title="2.3 get和post总结"></a>2.3 get和post总结</h3><h4 id="2-3-1-相同点和不同点"><a href="#2-3-1-相同点和不同点" class="headerlink" title="2.3.1 相同点和不同点"></a>2.3.1 相同点和不同点</h4><blockquote>
<p>相同点：两种都可以给服务器传递数据，都是通过<code>form</code>元素的<code>method</code>属性指定，默认是get</p>
<p>不同点：主要是侧重点不同</p>
<p>​    get请求侧重获取</p>
<p>​    post请求侧重提交</p>
</blockquote>
<p>####2.3.2 使用建议</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">以后具体用哪种请求传递数据没有规定，get和post请求都会使用。</span><br><span class="line">		例：</span><br><span class="line">			注册、登录等功能时，用post请求又更好。</span><br><span class="line"></span><br><span class="line">   使用上都是具体看自己的需求来决定是get还是post。总之，如果涉及到密码等敏感信息的，决不能用get，并且，要想清楚自己是为了拿东西（get），还是为了送东西（post）。</span><br><span class="line"></span><br><span class="line">		注：a标签的跳转，也可以理解为是一种get请求。因为get请求本身就是通过网址的跳转来进行的。像我们之前写的英雄列表案例里瞅瞅就是一个a标签，我们通过点击a标签的跳转，发起了get请求去获得结果。</span><br></pre></td></tr></table></figure>
<h2 id="3-上传文件"><a href="#3-上传文件" class="headerlink" title="3. 上传文件"></a>3. 上传文件</h2><h3 id="3-1-表单元素file"><a href="#3-1-表单元素file" class="headerlink" title="3.1 表单元素file"></a>3.1 表单元素file</h3><ul>
<li>专门用来做上传的html标签</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-2-使用post请求提交上传的文件"><a href="#3-2-使用post请求提交上传的文件" class="headerlink" title="3.2 使用post请求提交上传的文件"></a>3.2 使用post请求提交上传的文件</h3><blockquote>
<p>为什么用post请求</p>
</blockquote>
<ul>
<li>post请求一般是给服务器提交数据，侧重于提交。上传文件就是要给服务器送数据</li>
<li>get请求有长度限制，不适合传过大文件</li>
</ul>
<h3 id="3-3-上传初体验"><a href="#3-3-上传初体验" class="headerlink" title="3.3 上传初体验"></a>3.3 上传初体验</h3><ul>
<li>界面代码如下：</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 表单里仅仅一个文件上传元素，提交到file.php --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"file.php"</span> <span class="attr">method</span>=<span class="string">'post'</span> <span class="attr">enctype</span>=<span class="string">'multipart/form-data'</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">name</span>=<span class="string">'icon'</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：如果要上传文件，必须给form表单添加<code>enctype=&#39;multipart/form-data&#39;</code>属性，否则无效</p>
</blockquote>
<h4 id="3-3-1-FILES"><a href="#3-3-1-FILES" class="headerlink" title="3.3.1 $_FILES"></a>3.3.1 $_FILES</h4><ul>
<li><code>$_POST</code>  此时取不到上传的文件，只能取到文件名。</li>
<li>要取文件，要用  <code>$_FILES</code></li>
<li>代码如下：</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var_dump($_FILES); <span class="comment">//打印看$_FILES里有什么</span></span><br></pre></td></tr></table></figure>
<ul>
<li>打印信息如下</li>
</ul>
<p><img src="/2018/07/21/表单与服务器交互/../alrxu/1521014270503.png" alt=""></p>
<blockquote>
<p>结论： <code>$_FILES</code>  也是一个关联型数组，这个数组下面 icon 对应的value又是一个关联型数组</p>
<p>几个key对应值的说明：</p>
<p>​        1.name：保存的是文件名</p>
<p>​        2.type：保存的是文件类型</p>
<p>​        3.tmp_name：保存的是客户端上传来的文件临时保存的路径</p>
<p>​        4.error：错误信息代码</p>
<p>​        5.size：文件大小</p>
</blockquote>
<p>在这个数组中，最需要关注的是<code>tmp_name</code> 这个键里保存的临时目录，客户端上传文件提交到服务器后，是上传到服务器的<strong>临时文件夹</strong>，如果服务器不做任何处理，那么这个上传的文件会很快被系统<strong>自动删掉</strong>。</p>
<p>因此，如果要正确接收到客户端上传的文件，还必须想办法把这个文件移出临时文件夹！</p>
<h4 id="3-3-2-文件移动函数"><a href="#3-3-2-文件移动函数" class="headerlink" title="3.3.2 文件移动函数"></a>3.3.2 文件移动函数</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">move_uploaded_file(文件原路径、目标路径);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>参数1：代表要找到被移动的文件</p>
<p>参数2：代表把这个文件移动到哪</p>
<p>如果移动成功，返回值会为true，如果移动失败，返回值会为false</p>
</blockquote>
<ul>
<li>代码如下：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">         var_dump($_FILES);</span><br><span class="line">		//参数1：移动哪个文件</span><br><span class="line">		//参数2：移动到哪</span><br><span class="line">         $success = move_uploaded_file($_FILES[&apos;icon&apos;][&apos;tmp_name&apos;],&apos;./upload/&apos;.$_FILES[&apos;icon&apos;][&apos;name&apos;]);</span><br><span class="line"></span><br><span class="line">         if($success):</span><br><span class="line">            echo &apos;上传成功！&apos;;</span><br><span class="line">         else:</span><br><span class="line">            echo &apos;上传失败&apos;;</span><br><span class="line">         endif;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<h2 id="4-文件操作"><a href="#4-文件操作" class="headerlink" title="4. 文件操作"></a>4. 文件操作</h2><h3 id="4-1-写入文件"><a href="#4-1-写入文件" class="headerlink" title="4.1 写入文件"></a>4.1 写入文件</h3><ul>
<li>如果需要把一段数据写入到文件，可以用  <code>file_put_contents</code>  函数</li>
<li>用法：</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file_put_contents(要写入的文件路径,文件的内容);</span><br></pre></td></tr></table></figure>
<ul>
<li>例：</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//这代表在C盘的123目录写入一个1.txt文件，这个文件的内容是abcd</span></span><br><span class="line">file_put_contents(<span class="string">'c:\123\1.txt'</span>,<span class="string">"abcd"</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>上面用的是绝对路径，也可以用相对路径，例：</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//写到当前目录的1.txt文件</span></span><br><span class="line">file_put_contents(<span class="string">'1.txt'</span>,<span class="string">"abcd"</span>);</span><br></pre></td></tr></table></figure>
<h3 id="4-2-读取文件内容"><a href="#4-2-读取文件内容" class="headerlink" title="4.2 读取文件内容"></a>4.2 读取文件内容</h3><p>用法：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//会把这个文件里的内容读取出来以返回值形式返回。</span></span><br><span class="line">file_get_contents(文件路径);</span><br></pre></td></tr></table></figure>
<p>例：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//代表读取出1.txt中的内容，存到$content变量里</span></span><br><span class="line">$content = file_get_contents(<span class="string">'c:\123\1.txt'</span>);</span><br></pre></td></tr></table></figure>
<h3 id="4-3-判断文件是否存在"><a href="#4-3-判断文件是否存在" class="headerlink" title="4.3 判断文件是否存在"></a>4.3 判断文件是否存在</h3><p>用法：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//如果文件存在，则返回true,否则返回false</span></span><br><span class="line">file_exists(文件路径);</span><br></pre></td></tr></table></figure>
<h2 id="5-注册-amp-登录功能简单体验"><a href="#5-注册-amp-登录功能简单体验" class="headerlink" title="5. 注册&amp;登录功能简单体验"></a>5. 注册&amp;登录功能简单体验</h2><blockquote>
<p>写一套注册账号、登录账号功能的案例</p>
</blockquote>
<h3 id="5-1-注册的实现逻辑"><a href="#5-1-注册的实现逻辑" class="headerlink" title="5.1 注册的实现逻辑"></a>5.1 注册的实现逻辑</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">在一个网站注册一个账号，就相当于一个消费在一个商家办一张会员卡一样。</span><br><span class="line"></span><br><span class="line">需要把你的相关资料告诉给商家，例如名字、生日等。</span><br><span class="line"></span><br><span class="line">然后商家把你的这些资料存起来，等用户下次要来店面时可以比对身份再判断让不让你享受会员价。</span><br><span class="line"></span><br><span class="line">因此，注册账号的逻辑是：用户输入想注册的账号和密码，提交给 服务器 ，然后服务器把账号和密码存起来，方便下次验证身份。</span><br></pre></td></tr></table></figure>
<h3 id="5-2-注册界面和注册功能"><a href="#5-2-注册界面和注册功能" class="headerlink" title="5.2 注册界面和注册功能"></a>5.2 注册界面和注册功能</h3><ul>
<li>效果如图：</li>
</ul>
<p><img src="/2018/07/21/表单与服务器交互/../alrxu/1521083051915.png" alt=""></p>
<blockquote>
<p>整个注册界面就只是一张表单，用来让用户填写想注册的账号和密码</p>
</blockquote>
<ul>
<li>新建  <code>register.html</code>  文件，核心代码如下：</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"write.php"</span> <span class="attr">method</span>=<span class="string">"POST"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">""</span>&gt;</span>请输入账号：<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"id"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">""</span>&gt;</span>请输入密码：<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"pwd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"注册"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>用户点击注册后，会把账号密码发送到  <code>write.php</code>  这个文件。</li>
<li>新建  <code>write.php</code>  文件，用来处理用户注册的信息</li>
<li>代码如下：</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取传递过来的账号和密码</span></span><br><span class="line">$id = $_POST[<span class="string">'id'</span>];</span><br><span class="line">$pwd = $_POST[<span class="string">'pwd'</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//把账号当文件名写入到data目录里，把密码当文件的内容</span></span><br><span class="line">file_put_contents(<span class="string">'./data/'</span>.$id.<span class="string">'.txt'</span>,$pwd);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">'&lt;h2&gt;注册成功！&lt;/h2&gt;'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">'&lt;a href="login.html"&gt;点我去登录&lt;/a&gt;'</span>;</span><br></pre></td></tr></table></figure>
<h3 id="5-3-登录的逻辑"><a href="#5-3-登录的逻辑" class="headerlink" title="5.3 登录的逻辑"></a>5.3 登录的逻辑</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">登录就好比用户来商家消费了，先给商家报名字和密码，然后商家查询自己的小本子里看有没有这个记录，有的话，就让他进入消费。</span><br><span class="line"></span><br><span class="line">因此，登录的逻辑是：用户输入之前注册好的账号和密码提交给服务器,然后服务器再查询自己记录的数据里，有没有这条数据，如果有，登录成功，如果没有，登录失败。</span><br></pre></td></tr></table></figure>
<h3 id="5-4-登录界面和登录功能"><a href="#5-4-登录界面和登录功能" class="headerlink" title="5.4 登录界面和登录功能"></a>5.4 登录界面和登录功能</h3><ul>
<li>新建  <code>login.html</code>  文件，用来让用户登录。代码如下：</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"read.php"</span> <span class="attr">method</span>=<span class="string">"POST"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">""</span>&gt;</span>请输入账号：<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"id"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">""</span>&gt;</span>请输入密码：<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"pwd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"登录"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>当点击登录后，会把数据提交到  <code>read.php</code>  文件。</li>
<li>新建  <code>read.php</code>  文件，代码如下</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"> 	<span class="comment">//获取用户输入的账号和密码</span></span><br><span class="line">     $id = $_POST[<span class="string">'id'</span>];</span><br><span class="line">     $pwd = $_POST[<span class="string">'pwd'</span>];</span><br><span class="line">  <span class="comment">//判断文件是否存在</span></span><br><span class="line">     $res = file_exists(<span class="string">'./data/'</span>.$id.<span class="string">'.txt'</span>);</span><br><span class="line"></span><br><span class="line">     <span class="keyword">if</span>($res):</span><br><span class="line"><span class="comment">//如果有这个文件，证明包含这个账号，取出文件里的内容</span></span><br><span class="line">       $filePWD = file_get_contents(<span class="string">'./data/'</span>.$id.<span class="string">'.txt'</span>);</span><br><span class="line">       <span class="comment">//跟用户输入的密码进行比对，如果相等证明登录成功</span></span><br><span class="line">       <span class="keyword">if</span>($filePWD == $pwd):</span><br><span class="line">         <span class="keyword">echo</span> <span class="string">'登录成功!'</span>;</span><br><span class="line">       <span class="keyword">else</span>:</span><br><span class="line">         <span class="keyword">echo</span> <span class="string">'密码错误'</span>;</span><br><span class="line">       <span class="keyword">endif</span>;</span><br><span class="line"> <span class="comment">//如果文件名不存在，代表没有这个账号</span></span><br><span class="line">     <span class="keyword">else</span>:</span><br><span class="line">         <span class="keyword">echo</span> <span class="string">'账号不存在'</span>;</span><br><span class="line">     <span class="keyword">endif</span>;</span><br><span class="line"> <span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="6-网络基础知识"><a href="#6-网络基础知识" class="headerlink" title="6.网络基础知识"></a>6.网络基础知识</h2><h3 id="6-1-REQUEST"><a href="#6-1-REQUEST" class="headerlink" title="6.1 $_REQUEST"></a>6.1 $_REQUEST</h3><ul>
<li>这也是一个超全局变量</li>
<li>无论是用  <code>get</code>  还是  <code>post</code>  提交过来的数据，都可以用  <code>$_REQUEST</code>  拿到</li>
<li>用法</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$_REQUEST[<span class="string">'name'</span>];</span><br></pre></td></tr></table></figure>
<ul>
<li>例:</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$_REQUEST[<span class="string">'id'</span>];</span><br></pre></td></tr></table></figure>
<h3 id="6-2-网络基础知识"><a href="#6-2-网络基础知识" class="headerlink" title="6.2 网络基础知识"></a>6.2 网络基础知识</h3><h4 id="6-2-1-IP-地址"><a href="#6-2-1-IP-地址" class="headerlink" title="6.2.1 IP 地址"></a>6.2.1 IP 地址</h4><blockquote>
<p>Internet Protocol Address</p>
</blockquote>
<ul>
<li>设备（计算机、手机等）在网络中的地址，要想精准的从网络上连接某台设备，靠的就是IP地址。</li>
<li>目前最常见的格式（IPV4）：<code>[0-255].[0-255].[0-255].[0-255]</code> 即为四组 0-255 数字组成的组合。 例：119.75.213.61</li>
<li>访问网页本质上也是通过IP地址访问的。例：访问百度可以直接输入  <code>119.75.213.61</code>  访问</li>
<li>特殊IP：127.0.0.1  是本地地址。</li>
</ul>
<h4 id="6-2-2-域名"><a href="#6-2-2-域名" class="headerlink" title="6.2.2 域名"></a>6.2.2 域名</h4><ul>
<li>因为IP地址是一堆无规律的数字，不方便记忆，因此，计算机中出现了域名这样的东西。相当于给IP地址起一个别名。</li>
<li>例：119.75.213.61 的别名（域名）是  <a href="http://www.baidu.com" target="_blank" rel="noopener">www.baidu.com</a></li>
</ul>
<h4 id="6-2-3-DNS"><a href="#6-2-3-DNS" class="headerlink" title="6.2.3 DNS"></a>6.2.3 DNS</h4><blockquote>
<p>网络中只有靠IP地址才能找到另一台计算机。那么我们怎么又能通过域名找到计算机了呢？</p>
</blockquote>
<ul>
<li>在通过域名访问到网站之前会先经过<strong>DNS服务器</strong></li>
</ul>
<ul>
<li>DNS服务器：负责把域名解析成IP地址，然后再访问这个IP对应的网站</li>
<li>如图：</li>
</ul>
<p><img src="/2018/07/21/表单与服务器交互/../alrxu/1524900233102.png" alt=""></p>
<blockquote>
<p>所以有的时候，电脑能上QQ，不能打开网页，那可能是DNS服务器出问题了</p>
<p>因为QQ是通过IP直连不经过DNS服务器，而网页是输入域名的，要先找到DNS服务器解析。</p>
<p>DNS服务器不用自行设置，网络服务提供商会自动给指派。</p>
</blockquote>
<h4 id="6-2-4-端口"><a href="#6-2-4-端口" class="headerlink" title="6.2.4 端口"></a>6.2.4 端口</h4><ul>
<li>服务器可以理解为一台封闭的大厦，端口相当于这个大厦开的门</li>
<li>可以指定0-65535之间的任意一个数字作为端口，每一个端口对应服务器中的一个门，通过门可以访问到门后的服务</li>
<li>网站端口默认是80</li>
</ul>
<h4 id="6-2-5-host文件"><a href="#6-2-5-host文件" class="headerlink" title="6.2.5 host文件"></a>6.2.5 host文件</h4><ul>
<li>本地的域名 -&gt; IP的对应文件，这个文件可以自行指定某个域名与IP的对应。</li>
<li>文件内容</li>
</ul>
<p><img src="/2018/07/21/表单与服务器交互/../alrxu/1524902586372.png" alt=""></p>
<ul>
<li>DNS解析顺序<ul>
<li>先找到本机的host文件，看host文件里是否记录有这个域名对应的IP，如果有，就直接通过host记录的ip地址去访问</li>
<li>如果host文件里没有记录，再去DNS服务器解析域名</li>
</ul>
</li>
<li>如图：</li>
</ul>
<p><img src="/2018/07/21/表单与服务器交互/../alrxu/1524902420673.png" alt=""></p>
<ul>
<li>host文件位置<ul>
<li>windows：  <code>C:\Windows\System32\drivers\etc\hosts</code></li>
<li>mac：  <code>/etc/hosts</code></li>
</ul>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://Alrxu.github.io/2018/07/21/表单与服务器交互/" data-id="cjn9v9vyh000mv86xcg6bev96" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>
 


  
    <article id="post-服务器、PHP语法" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/Alrxu.github.io/2018/07/18/服务器、PHP语法/" class="article-date">
  <time datetime="2018-07-18T07:08:10.762Z" itemprop="datePublished">2018-07-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/Alrxu.github.io/2018/07/18/服务器、PHP语法/">服务器环境以及PHP基础语法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h1 id="服务器、PHP"><a href="#服务器、PHP" class="headerlink" title="服务器、PHP"></a>服务器、PHP</h1><h2 id="1-服务器"><a href="#1-服务器" class="headerlink" title="1. 服务器"></a>1. 服务器</h2><h3 id="1-1-概念"><a href="#1-1-概念" class="headerlink" title="1.1 概念"></a>1.1 概念</h3><ul>
<li><p>服务器就是一台电脑。 </p>
</li>
<li><p>只要能提供某种服务的电脑都可以称为服务器</p>
</li>
</ul>
<h3 id="1-2-web服务器"><a href="#1-2-web服务器" class="headerlink" title="1.2 web服务器"></a>1.2 web服务器</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">思考： 如何让自己写好的网页让别人访问</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>方法1：把网页传给别人</strong></li>
</ul>
<blockquote>
<p>缺点：如果有1000个人要访问，我们就需要给1000个人发送文件</p>
</blockquote>
<ul>
<li><strong>方法2：网页上传到服务器</strong></li>
</ul>
<blockquote>
<p>谁要看这个网页，自己来访问服务器拿就行了</p>
</blockquote>
<h4 id="1-2-1-Apache的作用"><a href="#1-2-1-Apache的作用" class="headerlink" title="1.2.1 Apache的作用"></a>1.2.1 Apache的作用</h4><ul>
<li>普通电脑是不具备让用户来访问网页的功能</li>
<li>Apache是一个软件，这个软件可以把电脑具备让别人访问网页的功能</li>
</ul>
<h4 id="1-2-2-web服务器概念"><a href="#1-2-2-web服务器概念" class="headerlink" title="1.2.2 web服务器概念"></a>1.2.2 web服务器概念</h4><ul>
<li>当电脑具备了让网络上的用户访问网页的功能，那么这台电脑就叫web服务器</li>
</ul>
<blockquote>
<p>除了Apache以外、类似让电脑具备访问网页功能的软件还有IIS、Nginx等。</p>
</blockquote>
<h2 id="2-安装服务器环境"><a href="#2-安装服务器环境" class="headerlink" title="2. 安装服务器环境"></a>2. 安装服务器环境</h2><ul>
<li>需要安装Apache（为了让电脑变web服务器）、PHP环境（执行PHP代码）、MySql（数据库）</li>
</ul>
<blockquote>
<p>只要装好这一个软件，就具备了Apache、PHP、MySql</p>
</blockquote>
<h3 id="2-1-安装步骤图解"><a href="#2-1-安装步骤图解" class="headerlink" title="2.1 安装步骤图解"></a>2.1 安装步骤图解</h3><ul>
<li><p><strong>双击phpStudy安装包，如下：</strong></p>
<p><img src="/2018/07/18/服务器、PHP语法/alrxu/1520478174221.png" alt=""></p>
<p><img src="/2018/07/18/服务器、PHP语法/../alrxu/1520478174221.png" alt="alrxu/1520478174221"></p>
</li>
</ul>
<ul>
<li><strong>出现下图界面，选好自己要安装的路径，点OK即可</strong></li>
<li><img src="/2018/07/18/服务器、PHP语法/../alrxu/1520478147258.png" alt=""></li>
</ul>
<blockquote>
<p>注意：选的目录不能包含任意中文</p>
</blockquote>
<ul>
<li><strong>可能后面会出现以下提示，按”是”即可</strong></li>
<li><img src="/2018/07/18/服务器、PHP语法/../alrxu/1520478014255.png" alt=""></li>
</ul>
<h3 id="2-2-开启环境"><a href="#2-2-开启环境" class="headerlink" title="2.2 开启环境"></a>2.2 开启环境</h3><ul>
<li><strong>双击安装好的文件（在桌面会有）</strong></li>
<li><img src="/2018/07/18/服务器、PHP语法/../alrxu/1520477390831.png" alt=""></li>
</ul>
<ul>
<li><strong>点击启动，当指示灯变绿，即成功</strong>\</li>
<li><img src="/2018/07/18/服务器、PHP语法/../alrxu/1520478638293.png" alt=""></li>
</ul>
<ul>
<li><strong>第一次打开时可能会出以下提示，点允许访问即可</strong></li>
<li><img src="/2018/07/18/服务器、PHP语法/../alrxu/1520478391229.png" alt=""></li>
</ul>
<h3 id="2-3-测试是否打开成功"><a href="#2-3-测试是否打开成功" class="headerlink" title="2.3 测试是否打开成功"></a>2.3 测试是否打开成功</h3><ul>
<li>打开浏览器输入 <code>127.0.0.1</code>，如出现下面网页即成功</li>
</ul>
<p><img src="/2018/07/18/服务器、PHP语法/../alrxu/1520492806859.png" alt=""></p>
<h3 id="2-4-使用方法"><a href="#2-4-使用方法" class="headerlink" title="2.4 使用方法"></a>2.4 使用方法</h3><ul>
<li>以后如果需要自己写的网站被其他人访问到，需要把网页放到  <code>PHPStudy</code>  的安装目录下的   <code>www</code>  文件夹里</li>
</ul>
<p>如图：</p>
<p><img src="/2018/07/18/服务器、PHP语法/../alrxu/1524793369066.png" alt=""></p>
<ul>
<li>然后在浏览器上输入  <code>127.0.0.1/clock.html</code>  即可访问</li>
<li>如果其他人要访问，就要把  <code>127.0.0.1</code>  换成自己的<strong>ip地址</strong></li>
</ul>
<blockquote>
<p>注：在计算机中 127.0.0.1 代表自己本机。</p>
</blockquote>
<h3 id="2-5-浏览器请求服务器访问到网页图解"><a href="#2-5-浏览器请求服务器访问到网页图解" class="headerlink" title="2.5 浏览器请求服务器访问到网页图解"></a>2.5 浏览器请求服务器访问到网页图解</h3><p><img src="/2018/07/18/服务器、PHP语法/../alrxu/1524799418710.png" alt=""></p>
<h2 id="3-PHP语法基础"><a href="#3-PHP语法基础" class="headerlink" title="3. PHP语法基础"></a>3. PHP语法基础</h2><h3 id="3-1-PHP文件"><a href="#3-1-PHP文件" class="headerlink" title="3.1 PHP文件"></a>3.1 PHP文件</h3><ul>
<li><p>要写PHP代码，就要新建一个以  <code>.php</code>  后缀结尾的文件，把PHP代码写在这个文件里。</p>
<p>​</p>
</li>
</ul>
<h3 id="3-2-PHP标记"><a href="#3-2-PHP标记" class="headerlink" title="3.2 PHP标记"></a>3.2 PHP标记</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="comment">//这里面写PHP代码    </span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>所有的PHP代码都应该写在这个标记里</li>
</ul>
<h3 id="3-3-第一条PHP语句：echo"><a href="#3-3-第一条PHP语句：echo" class="headerlink" title="3.3 第一条PHP语句：echo"></a>3.3 第一条PHP语句：echo</h3><h4 id="3-3-1-echo作用："><a href="#3-3-1-echo作用：" class="headerlink" title="3.3.1 echo作用："></a>3.3.1 echo作用：</h4><ul>
<li>输出一段内容</li>
</ul>
<h4 id="3-3-2-echo语法："><a href="#3-3-2-echo语法：" class="headerlink" title="3.3.2 echo语法："></a>3.3.2 echo语法：</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="string">"要输出的内容"</span>;</span><br></pre></td></tr></table></figure>
<h4 id="3-3-3-echo输出标签"><a href="#3-3-3-echo输出标签" class="headerlink" title="3.3.3 echo输出标签"></a>3.3.3 echo输出标签</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">'&lt;h1&gt;I am title&lt;/h1&gt;'</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>结果</li>
<li><img src="/2018/07/18/服务器、PHP语法/../alrxu/1520503106583.png" alt=""></li>
</ul>
<blockquote>
<p>结论：echo右边写的是什么内容，浏览器里展示的就是什么内容，如果echo右边写的是标签，那么会当html元素来解析</p>
</blockquote>
<h3 id="3-4-PHP中的注释"><a href="#3-4-PHP中的注释" class="headerlink" title="3.4 PHP中的注释"></a>3.4 PHP中的注释</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 单行注释</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 多行注释 */</span></span><br></pre></td></tr></table></figure>
<h3 id="3-5-PHP中的变量"><a href="#3-5-PHP中的变量" class="headerlink" title="3.5 PHP中的变量"></a>3.5 PHP中的变量</h3><ul>
<li><p>跟JS中的变量概念一样，都是存储数据的</p>
</li>
<li><p>注意：PHP声明变量不需要加var，但变量名必须以$开头</p>
<p>​</p>
</li>
</ul>
<h4 id="3-5-1-声明语法："><a href="#3-5-1-声明语法：" class="headerlink" title="3.5.1 声明语法："></a>3.5.1 声明语法：</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$变量名 = 数据;</span><br></pre></td></tr></table></figure>
<ul>
<li>例：</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//声明一个变量$age，值为16</span></span><br><span class="line">$age = <span class="number">16</span>;</span><br><span class="line"><span class="comment">//声明一个变量$name，值为'andy'</span></span><br><span class="line">$name = <span class="string">'andy'</span>;</span><br><span class="line"><span class="comment">//声明一个变量$height，值为175.6</span></span><br><span class="line">$height = <span class="number">175.6</span>;</span><br><span class="line"><span class="comment">//什么一个变量$gender，值为true</span></span><br><span class="line">$gender = <span class="keyword">true</span>;</span><br></pre></td></tr></table></figure>
<h4 id="3-5-2-访问变量语法"><a href="#3-5-2-访问变量语法" class="headerlink" title="3.5.2 访问变量语法"></a>3.5.2 访问变量语法</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> $age;<span class="comment">//把$age的值输出</span></span><br></pre></td></tr></table></figure>
<h3 id="3-6-PHP的数据类型"><a href="#3-6-PHP的数据类型" class="headerlink" title="3.6 PHP的数据类型"></a>3.6 PHP的数据类型</h3><ul>
<li>string（字符串）</li>
<li>integer（整型）—— 只能存整数</li>
<li>float（浮点型）—— 可以存带小数位的数字</li>
<li>boolean（布尔型）</li>
<li>array（数组）</li>
<li>object（对象）</li>
<li>NULL（空）</li>
</ul>
<h3 id="3-7-PHP中的字符串"><a href="#3-7-PHP中的字符串" class="headerlink" title="3.7 PHP中的字符串"></a>3.7 PHP中的字符串</h3><ul>
<li>用双引号或单引号包起来的都是字符串</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$str1 = <span class="string">'我是字符串'</span>; <span class="comment">//单引号</span></span><br><span class="line">$str2 = <span class="string">"我也是字符串"</span>; <span class="comment">//双引号</span></span><br></pre></td></tr></table></figure>
<ul>
<li>在PHP中用双引号或单引号有细节上的区别<ul>
<li>单引号包起来的内容里，如果有变量名，这个变量名只当字符串，不对变量名做解析</li>
<li>双引号包起来的内容里，如果有变量名，会把这个变量的值取出来当字符串，会多变量名做解析</li>
</ul>
</li>
<li>例：</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">  </span><br><span class="line">    $name = <span class="string">'andy'</span>;</span><br><span class="line">    <span class="comment">//实际字符串内容为Hello $name</span></span><br><span class="line">    $str1 = <span class="string">'Hello $name'</span>;</span><br><span class="line">    <span class="comment">//实际字符串内容为Hello andy</span></span><br><span class="line">    $str2 = <span class="string">"Hello $name"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//输出Hello $name</span></span><br><span class="line">    <span class="keyword">echo</span> $str1;</span><br><span class="line">    <span class="comment">//输出Hello andy</span></span><br><span class="line">    <span class="keyword">echo</span> $str2;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2018/07/18/服务器、PHP语法/../alrxu/1524796311480.png" alt=""></p>
<h3 id="3-8-PHP中的运算符"><a href="#3-8-PHP中的运算符" class="headerlink" title="3.8 PHP中的运算符"></a>3.8 PHP中的运算符</h3><ul>
<li>与JS中的运算符基本一致<ul>
<li>JS中的算术运算、自增自减、复合运算、三元运算、关系运算、逻辑运算等在PHP中写法和作用都是一样的！</li>
</ul>
</li>
<li><strong>字符串连接符在PHP中不是用 <code>+</code> ，而是用  <code>.</code></strong></li>
<li>例:</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    </span><br><span class="line">    $name = <span class="string">'jack'</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 拼接 `hey ` 和 `jack`</span></span><br><span class="line">    $message = <span class="string">'hey '</span> . $name;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 输出：hey jack</span></span><br><span class="line"> 	<span class="keyword">echo</span> $message;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-9-PHP中的数组"><a href="#3-9-PHP中的数组" class="headerlink" title="3.9 PHP中的数组"></a>3.9 PHP中的数组</h3><blockquote>
<p>php中有两种类型的数组：索引数组、关联数组</p>
</blockquote>
<h4 id="3-9-1-索引数组"><a href="#3-9-1-索引数组" class="headerlink" title="3.9.1 索引数组"></a>3.9.1 索引数组</h4><ul>
<li>跟JS普通数组一致</li>
<li>语法：</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$数组名 = <span class="keyword">array</span>(元素列表);</span><br><span class="line"></span><br><span class="line"><span class="comment">//php5.4后可以简写</span></span><br><span class="line">$数组名 = [元素];</span><br></pre></td></tr></table></figure>
<ul>
<li>例:</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">	<span class="comment">// 定义一个索引数组</span></span><br><span class="line">	$arr = <span class="keyword">array</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);</span><br><span class="line">	var_dump($arr);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// PHP 5.4 以后定义的方式可以用 `[]`</span></span><br><span class="line">	$arr2 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line">	var_dump($arr2);</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>var_dump：一种专门用来输出复杂数据类型的函数。</p>
<p>为什么不用echo？因为如果用echo输出复杂数据类型，不会输出这个数据的值，只会输出这个数据的类型</p>
</blockquote>
<ul>
<li>取值语法：</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$数组名[索引];</span><br></pre></td></tr></table></figure>
<ul>
<li>例:</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$array[<span class="number">0</span>];<span class="comment">//取出索引为0的元素</span></span><br></pre></td></tr></table></figure>
<h4 id="3-9-2-关联数组"><a href="#3-9-2-关联数组" class="headerlink" title="3.9.2 关联数组"></a>3.9.2 关联数组</h4><ul>
<li>类似于JS中的对象（但在PHP中不能算对象类型）</li>
<li>语法：</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$数组名 = <span class="keyword">array</span>(<span class="string">'key'</span>=&gt;<span class="string">'value'</span>);</span><br><span class="line"><span class="comment">// PHP 5.4 以后定义的方式可以用 `[]`</span></span><br><span class="line">$数组名 = [<span class="string">'key'</span> =&gt; <span class="string">'value1'</span>];</span><br></pre></td></tr></table></figure>
<ul>
<li>例：</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$arr = <span class="keyword">array</span>(<span class="string">'name'</span>=&gt;<span class="string">'jack'</span>, <span class="string">'age'</span>=&gt;<span class="number">16</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>取值语法：</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$数组名[<span class="string">'key'</span>];</span><br></pre></td></tr></table></figure>
<ul>
<li>例：</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$arr[<span class="string">'name'</span>]; <span class="comment">//输出key为name的值</span></span><br></pre></td></tr></table></figure>
<h4 id="3-9-3-多维数组"><a href="#3-9-3-多维数组" class="headerlink" title="3.9.3 多维数组"></a>3.9.3 多维数组</h4><ul>
<li>其实还是数组，只不过数组中的元素又是一个数组</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">	<span class="comment">//多维数组，数组中的每个元素又是个数组</span></span><br><span class="line">    $arr = <span class="keyword">array</span>(</span><br><span class="line">        <span class="keyword">array</span>(<span class="string">'name'</span>=&gt;<span class="string">'jack'</span>,<span class="string">'age'</span>=&gt;<span class="number">16</span>),</span><br><span class="line">        <span class="keyword">array</span>(<span class="string">'name'</span>=&gt;<span class="string">'rose'</span>,<span class="string">'age'</span>=&gt;<span class="number">17</span>),</span><br><span class="line">        <span class="keyword">array</span>(<span class="string">'name'</span>=&gt;<span class="string">'andy'</span>,<span class="string">'age'</span>=&gt;<span class="number">18</span>),</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">     var_dump($arr);</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="3-9-4-取PHP数组长度"><a href="#3-9-4-取PHP数组长度" class="headerlink" title="3.9.4 取PHP数组长度"></a>3.9.4 取PHP数组长度</h4><ul>
<li><p>PHP中数组<strong>没有</strong>length属性</p>
</li>
<li><p>要取数组长度，要用  <code>count</code>  函数</p>
</li>
</ul>
<p>例：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    $arr = <span class="keyword">array</span>(<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>);</span><br><span class="line">    <span class="comment">//输出4</span></span><br><span class="line">    <span class="keyword">echo</span> count($arr);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="3-9-5-遍历索引数组"><a href="#3-9-5-遍历索引数组" class="headerlink" title="3.9.5 遍历索引数组"></a>3.9.5 遍历索引数组</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">	<span class="comment">//声明索引数组</span></span><br><span class="line">    $arr = <span class="keyword">array</span>(<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>);</span><br><span class="line">	<span class="comment">//遍历索引数组的元素</span></span><br><span class="line">    <span class="keyword">for</span>($i = <span class="number">0</span>; $i &lt; count($arr); $i++)&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">echo</span> $arr[$i].<span class="string">'&lt;br&gt;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="3-9-6-遍历关联数组"><a href="#3-9-6-遍历关联数组" class="headerlink" title="3.9.6 遍历关联数组"></a>3.9.6 遍历关联数组</h4><ul>
<li>语法：</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">foreach</span>($数组名 <span class="keyword">as</span> $key =&gt; $value)&#123;</span><br><span class="line">    <span class="comment">//循环体里$key就是当前遍历到的元素的$key</span></span><br><span class="line">    <span class="comment">//循环体里$value就是当前遍历到的元素的$value</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>例：</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">   </span><br><span class="line">   <span class="comment">//声明数组</span></span><br><span class="line">   $arr = <span class="keyword">array</span>(<span class="string">'name'</span>=&gt;<span class="string">'jack'</span>, <span class="string">'age'</span>=&gt;<span class="number">16</span>);</span><br><span class="line"></span><br><span class="line">   <span class="comment">//遍历数组</span></span><br><span class="line">   <span class="keyword">foreach</span>($arr <span class="keyword">as</span> $key =&gt; $value)&#123;</span><br><span class="line">        <span class="comment">//输出当前元素的key和value</span></span><br><span class="line">        <span class="keyword">echo</span> $key . <span class="string">" =&gt; "</span> . $value;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">'&lt;br/&gt;'</span>;</span><br><span class="line">   &#125;</span><br><span class="line">    </span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>图解：</li>
<li><img src="/2018/07/18/服务器、PHP语法/../alrxu/1524797944213.png" alt=""></li>
</ul>
<h3 id="3-10-函数、流程控制语句"><a href="#3-10-函数、流程控制语句" class="headerlink" title="3.10 函数、流程控制语句"></a>3.10 函数、流程控制语句</h3><blockquote>
<p>与JS中的一致</p>
</blockquote>
<h4 id="3-10-1-函数"><a href="#3-10-1-函数" class="headerlink" title="3.10.1 函数"></a>3.10.1 函数</h4><ul>
<li>声明函数：</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> 函数名<span class="params">(形参列表)</span></span>&#123;</span><br><span class="line">    函数体;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>调用函数:</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">函数名(实参列表);</span><br></pre></td></tr></table></figure>
<h4 id="3-11-2-流程控制"><a href="#3-11-2-流程控制" class="headerlink" title="3.11.2 流程控制"></a>3.11.2 流程控制</h4><ul>
<li>有如下流程控制语句</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>语句</span><br><span class="line"><span class="keyword">switch</span>语句</span><br><span class="line"><span class="keyword">while</span>语句</span><br><span class="line"><span class="keyword">do</span>-<span class="keyword">while</span>语句</span><br><span class="line"><span class="keyword">for</span>语句</span><br></pre></td></tr></table></figure>
<blockquote>
<p>与JS的使用一样</p>
</blockquote>
<h2 id="4-HTML-PHP混编"><a href="#4-HTML-PHP混编" class="headerlink" title="4. HTML+PHP混编"></a>4. HTML+PHP混编</h2><blockquote>
<p>PHP代码可以和HTML代码混合在一起编写</p>
</blockquote>
<h3 id="4-1-基本使用"><a href="#4-1-基本使用" class="headerlink" title="4.1 基本使用"></a>4.1 基本使用</h3><ul>
<li>例：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;!-- php部分开始 --&gt;</span><br><span class="line">    &lt;?php</span><br><span class="line">        $name = &apos;jack&apos;;</span><br><span class="line">        //输出h1标签</span><br><span class="line">        echo &quot;&lt;h1&gt;我的名字叫$name&lt;/h1&gt;&quot;;</span><br><span class="line">    ?&gt;</span><br><span class="line">    &lt;!-- php部分结束 --&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>访问结果：</li>
<li><img src="/2018/07/18/服务器、PHP语法/../alrxu/1524800347991.png" alt=""></li>
</ul>
<h3 id="4-2-图解"><a href="#4-2-图解" class="headerlink" title="4.2 图解"></a>4.2 图解</h3><p><img src="/2018/07/18/服务器、PHP语法/../alrxu/1524800532712.png" alt=""></p>
<blockquote>
<p>说明：php文件中，只有&lt;?php   ?&gt; 标签内的代码，才会被PHP执行，执行结果是什么，就输出什么内容。其他部分原样显示</p>
</blockquote>
<h3 id="4-3-根据PHP数组数据创建表格"><a href="#4-3-根据PHP数组数据创建表格" class="headerlink" title="4.3 根据PHP数组数据创建表格"></a>4.3 根据PHP数组数据创建表格</h3><ul>
<li>PHP数组为</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$books = <span class="keyword">array</span>(</span><br><span class="line">	</span><br><span class="line">    <span class="keyword">array</span>(<span class="string">'name'</span>=&gt;<span class="string">'C语言从入门到入土'</span>,<span class="string">'price'</span>=&gt;<span class="number">9.9</span>),</span><br><span class="line">    <span class="keyword">array</span>(<span class="string">'name'</span>=&gt;<span class="string">'MySql：从删库到跑路'</span>,<span class="string">'price'</span>=&gt;<span class="number">11.9</span>),</span><br><span class="line">    <span class="keyword">array</span>(<span class="string">'name'</span>=&gt;<span class="string">'前端开发：土豪之路'</span>,<span class="string">'price'</span>=&gt;<span class="number">99.99</span>),</span><br><span class="line">    <span class="keyword">array</span>(<span class="string">'name'</span>=&gt;<span class="string">'颈椎病治疗指南'</span>,<span class="string">'price'</span>=&gt;<span class="number">8.4</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<ul>
<li>核心代码为：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;tbody&gt;</span><br><span class="line">  &lt;!-- tbody里面的内容由PHP代码生成 --&gt;</span><br><span class="line">&lt;?php</span><br><span class="line">   </span><br><span class="line">//遍历数组</span><br><span class="line">for($i = 0; $i &lt; count($books); $i++)&#123;</span><br><span class="line">    </span><br><span class="line">    //数组中每个元素是一行</span><br><span class="line">    echo &quot;&lt;tr&gt;&quot;;</span><br><span class="line">    </span><br><span class="line">    //元素内的每个属性值是每一列</span><br><span class="line">    echo &quot;&lt;td&gt;&quot;. $books[$i][&apos;name&apos;] .&quot;&lt;/td&gt;&quot;;</span><br><span class="line">    echo &quot;&lt;td&gt;&quot;. $books[$i][&apos;price&apos;].&quot;&lt;/td&gt;&quot;;</span><br><span class="line">    </span><br><span class="line">    echo &quot;&lt;/tr&gt;&quot;;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br><span class="line">    </span><br><span class="line">&lt;/tbody&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>解析：我们把html中不需要变动的table,thead等部分用html和样式直接写出来，根据数据变动的部分用PHP生成。</p>
<p>缺点：每个标签都需要通过字符串拼接的方式输出。</p>
</blockquote>
<h3 id="4-4-HTML-PHP混编的另一写法"><a href="#4-4-HTML-PHP混编的另一写法" class="headerlink" title="4.4 HTML+PHP混编的另一写法"></a>4.4 HTML+PHP混编的另一写法</h3><h4 id="4-4-1-代码"><a href="#4-4-1-代码" class="headerlink" title="4.4.1 代码"></a>4.4.1 代码</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">    //创建一个数组数组</span><br><span class="line">    $array = [&apos;张三&apos;,&apos;李四&apos;,&apos;王五&apos;,&apos;赵六&apos;];</span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &lt;!-- 每个li标签里再嵌入一段PHP代码 --&gt;</span><br><span class="line">        &lt;li&gt;&lt;?php echo $array[0]; ?&gt;&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;&lt;?php echo $array[1]; ?&gt;&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;&lt;?php echo $array[2]; ?&gt;&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;&lt;?php echo $array[3]; ?&gt;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h4 id="4-4-2-运行结果"><a href="#4-4-2-运行结果" class="headerlink" title="4.4.2 运行结果"></a>4.4.2 运行结果</h4><p><img src="/2018/07/18/服务器、PHP语法/../alrxu/1524811740035.png" alt=""></p>
<h4 id="4-4-3-图解"><a href="#4-4-3-图解" class="headerlink" title="4.4.3 图解"></a>4.4.3 图解</h4><p><img src="/2018/07/18/服务器、PHP语法/../alrxu/1524811988865.png" alt=""></p>
<h4 id="4-4-4-这种写法的优势"><a href="#4-4-4-这种写法的优势" class="headerlink" title="4.4.4 这种写法的优势"></a>4.4.4 这种写法的优势</h4><blockquote>
<p>不用每个标签都用字符串拼接再输出了，直接可以写好标签，只不过在需要取值的地方再写一段php代码即可</p>
<p>缺点：不太智能，以后数组长度变了，html部分的li标签也要做对应的删减。</p>
</blockquote>
<h3 id="4-5-另一写法的改进"><a href="#4-5-另一写法的改进" class="headerlink" title="4.5 另一写法的改进"></a>4.5 另一写法的改进</h3><h4 id="4-5-1-代码"><a href="#4-5-1-代码" class="headerlink" title="4.5.1 代码"></a>4.5.1 代码</h4><ul>
<li>主要看有注释的部分</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">    //创建一个数组数组</span><br><span class="line">    $array = [&apos;张三&apos;,&apos;李四&apos;,&apos;王五&apos;,&apos;赵六&apos;];</span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &lt;?php</span><br><span class="line">            //循环遍历数组</span><br><span class="line">            for($i = 0; $i &lt; count($array); $i++)&#123;</span><br><span class="line">        ?&gt;</span><br><span class="line">            &lt;!-- 每遍历一个元素就创建一个li标签 --&gt;</span><br><span class="line">            &lt;li&gt;&lt;?php echo $array[$i]; ?&gt;&lt;/li&gt;</span><br><span class="line">        </span><br><span class="line">        &lt;!-- 循环结束的另外一边括号 --&gt;</span><br><span class="line">        &lt;?php &#125; ?&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h4 id="4-5-2-优势"><a href="#4-5-2-优势" class="headerlink" title="4.5.2 优势"></a>4.5.2 优势</h4><blockquote>
<p>哪怕以后数组长度变了，也不用动html部分代码，因为现在li标签时根据数组的元素有几个而创建多少个。</p>
<p>提示：初学者一开始接触到这种代码，会觉得不适应。不要想太多其他问题，就当这是PHP特有的语法，记住这么写就好，多写几次就能习惯！</p>
</blockquote>
<h4 id="4-5-3-指令式写法"><a href="#4-5-3-指令式写法" class="headerlink" title="4.5.3 指令式写法"></a>4.5.3 指令式写法</h4><ul>
<li>如果不习惯以上大括号拆开的写法， 还有一种指令式写法。</li>
</ul>
<h5 id="4-5-3-1-语法："><a href="#4-5-3-1-语法：" class="headerlink" title="4.5.3.1 语法："></a>4.5.3.1 语法：</h5><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//if语句的指令式写法</span></span><br><span class="line"><span class="keyword">if</span>:</span><br><span class="line">  代码</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">  代码</span><br><span class="line"><span class="keyword">endif</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//for语句的指令式写法</span></span><br><span class="line"><span class="keyword">for</span>($i=<span class="number">0</span>;$i&lt;n;$i++):</span><br><span class="line">	代码</span><br><span class="line"><span class="keyword">endfor</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>即：以 <code>:</code>  代替  <code>{</code>  ，以 <code>endXX;</code>  代替  <code>}</code></p>
</blockquote>
<h5 id="4-5-3-2-把上例改成指令式写法"><a href="#4-5-3-2-把上例改成指令式写法" class="headerlink" title="4.5.3.2 把上例改成指令式写法"></a>4.5.3.2 把上例改成指令式写法</h5><ul>
<li>核心代码</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">    //循环开始</span><br><span class="line">    for($i = 0; $i &lt; count($array); $i++):</span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 每遍历一个元素就创建一个li标签 --&gt;</span><br><span class="line">    &lt;li&gt;&lt;?php echo $array[$i]; ?&gt;&lt;/li&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 循环结束 --&gt;</span><br><span class="line">&lt;?php endfor; ?&gt;</span><br></pre></td></tr></table></figure>
<h2 id="5-解决PHP输出中文乱码的问题"><a href="#5-解决PHP输出中文乱码的问题" class="headerlink" title="5. 解决PHP输出中文乱码的问题"></a>5. 解决PHP输出中文乱码的问题</h2><h3 id="5-1-问题展示："><a href="#5-1-问题展示：" class="headerlink" title="5.1 问题展示："></a>5.1 问题展示：</h3><ul>
<li>代码为</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="string">"你好,世界！"</span>;</span><br></pre></td></tr></table></figure>
<h3 id="5-2-问题原因："><a href="#5-2-问题原因：" class="headerlink" title="5.2 问题原因："></a>5.2 问题原因：</h3><ul>
<li>没有指定文件的字符集编码格式</li>
</ul>
<h3 id="5-3-解决办法"><a href="#5-3-解决办法" class="headerlink" title="5.3 解决办法"></a>5.3 解决办法</h3><h4 id="5-3-1-解决方法1："><a href="#5-3-1-解决方法1：" class="headerlink" title="5.3.1 解决方法1："></a>5.3.1 解决方法1：</h4><ul>
<li>包在HTML代码里，用HTML标签指定字符集编码</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;!-- html这里有指定编码 --&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;?php</span><br><span class="line">    echo &quot;大家好，我在黑马学前端&quot;;</span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h4 id="5-3-2-解决办法2："><a href="#5-3-2-解决办法2：" class="headerlink" title="5.3.2 解决办法2："></a>5.3.2 解决办法2：</h4><ul>
<li>在PHP中告诉浏览器，用UTF-8编码</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    header(<span class="string">'content-type:text/html;charset=utf-8'</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"大家好，我在黑马学前端"</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>提示：header(‘content-type:text/html;charset=utf-8’); 不要死记硬背，需要用时复制即可。</p>
</blockquote>
<h2 id="6-include指令"><a href="#6-include指令" class="headerlink" title="6. include指令"></a>6. include指令</h2><blockquote>
<p>include是PHP中用来导入另一文件内容的指令</p>
</blockquote>
<h3 id="6-1-语法"><a href="#6-1-语法" class="headerlink" title="6.1 语法"></a>6.1 语法</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">include</span> <span class="string">"文件路径"</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>例:</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">include</span> <span class="string">'/data/data_king_list.php'</span>;</span><br></pre></td></tr></table></figure>
<h3 id="6-2-效果解析"><a href="#6-2-效果解析" class="headerlink" title="6.2 效果解析"></a>6.2 效果解析</h3><p><img src="/2018/07/18/服务器、PHP语法/../alrxu/1524814123638.png" alt=""></p>
<blockquote>
<p>提示，在外部需要导入的outFile.php里不需要再写&lt;?php  ?&gt;标签</p>
</blockquote>
<h2 id="7-Apace和PHP作用详解"><a href="#7-Apace和PHP作用详解" class="headerlink" title="7.Apace和PHP作用详解"></a>7.Apace和PHP作用详解</h2><h3 id="7-1-Apache作用"><a href="#7-1-Apache作用" class="headerlink" title="7.1 Apache作用"></a>7.1 Apache作用</h3><blockquote>
<p>把浏览器请求的网页内容找出来，发送回浏览器</p>
<p><img src="/2018/07/18/服务器、PHP语法/../alrxu/1524799418710.png" alt=""></p>
</blockquote>
<h3 id="7-2-PHP环境作用"><a href="#7-2-PHP环境作用" class="headerlink" title="7.2 PHP环境作用"></a>7.2 PHP环境作用</h3><blockquote>
<p>Apache只是简单的找到文件，再把文件内容发回给浏览器，不对文件内容做解释。</p>
<p>PHP环境作用：在Apache把文件内容发回浏览器之前，对文件内容里的php代码做解释得到结果，再把这个结果通过Apache发回给浏览器</p>
</blockquote>
<h3 id="7-3-Apache-PHP环境的工作流程图"><a href="#7-3-Apache-PHP环境的工作流程图" class="headerlink" title="7.3 Apache+PHP环境的工作流程图"></a>7.3 Apache+PHP环境的工作流程图</h3><p><img src="/2018/07/18/服务器、PHP语法/../alrxu/1524816595241.png" alt=""></p>
<h3 id="7-4-Apache工作时的其他说明"><a href="#7-4-Apache工作时的其他说明" class="headerlink" title="7.4 Apache工作时的其他说明"></a>7.4 Apache工作时的其他说明</h3><blockquote>
<p>思考：浏览器请求每个网页，Apache都要交给PHP环境去解释吗？比如请求的是  <code>index.html</code>  这种网页呢？</p>
</blockquote>
<p><img src="/2018/07/18/服务器、PHP语法/../alrxu/1524818337602.png" alt=""></p>
<h3 id="7-5-Apache如何知道php文件要交给PHP环境去执行"><a href="#7-5-Apache如何知道php文件要交给PHP环境去执行" class="headerlink" title="7.5 Apache如何知道php文件要交给PHP环境去执行"></a>7.5 Apache如何知道php文件要交给PHP环境去执行</h3><ul>
<li>找到  <code>httpd-php.conf</code>  文件<ul>
<li>一般在  <code>C:\phpStudy\Apache\conf\extra</code>  这个目录下</li>
</ul>
</li>
<li>使用 <code>VSCode</code>  打开  <code>httpd-php.conf</code>  </li>
<li>打开后，内容为下：</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">LoadFile "C:/phpStudy/php/php-5.4.45/libssh2.dll"</span><br><span class="line">LoadFile "C:/phpStudy/php/php-5.4.45/php5ts.dll"</span><br><span class="line">LoadModule php5_module "C:/phpStudy/php/php-5.4.45/php5apache2_4.dll"</span><br><span class="line"><span class="tag">&lt;<span class="name">IfModule</span> <span class="attr">php5_module</span>&gt;</span></span><br><span class="line">PHPIniDir "C:/phpStudy/php/php-5.4.45/"</span><br><span class="line"><span class="tag">&lt;/<span class="name">IfModule</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">FilesMatch</span> "\<span class="attr">.php</span>$"&gt;</span></span><br><span class="line">    SetHandler application/x-httpd-php</span><br><span class="line"><span class="tag">&lt;/<span class="name">FilesMatch</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>这个文件的内容就是告诉Apache，如果客户端要以.php文件结尾的文件时，你先把这个文件交给我去解释，然后我把结果给你。</p>
</blockquote>
<ul>
<li>删掉此文件内容（或者注释掉），再次访问php文件时，可以看到</li>
</ul>
<p><img src="/2018/07/18/服务器、PHP语法/../alrxu/1520499236942.png" alt=""></p>
<blockquote>
<p>因为删掉了那个配置文件，那么Apache以后遇到php文件不会再有特殊处理，而是按照自己默认的工作方式，读取文件内容原样发回给客户端。</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://Alrxu.github.io/2018/07/18/服务器、PHP语法/" data-id="cjn9v9vyc000kv86x6ozhcqpr" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>
 


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/Alrxu.github.io/page/2/">&laquo; 上一页</a><a class="page-number" href="/Alrxu.github.io/">1</a><a class="page-number" href="/Alrxu.github.io/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/Alrxu.github.io/page/4/">4</a><a class="extend next" rel="next" href="/Alrxu.github.io/page/4/">下一页&raquo;</a>
  </nav>
</section>
           
    <aside id="sidebar">
  
    

  
    
  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title recent-posts">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/Alrxu.github.io/2018/11/07/11-vuex以及vuex和本地存储结合/">Vuex以及Vuex和本地存储结合使用</a>
          </li>
        
          <li>
            <a href="/Alrxu.github.io/2018/11/07/10使用脚手架生成项目以及项目分析/">使用vue-cli脚手架生成项目以及项目分析</a>
          </li>
        
          <li>
            <a href="/Alrxu.github.io/2018/11/05/07生命周期函数/">vue实例中的生命周期函数</a>
          </li>
        
          <li>
            <a href="/Alrxu.github.io/2018/11/05/08-webpack/">webpack</a>
          </li>
        
          <li>
            <a href="/Alrxu.github.io/2018/10/20/06路由以及watch和computed计算属性/">路由以及watch和computed计算属性</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    

  
    
  
    <!--微信公众号二维码-->


  
</aside>

      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-left">
      &copy; 2014 - 2018 John Doe&nbsp;|&nbsp;
      主题 <a href="https://github.com/giscafer/hexo-theme-cafe/" target="_blank">Cafe</a>
    </div>
     <div id="footer-right">
      联系方式&nbsp;|&nbsp;youemail@outlook.com
    </div>
  </div>
</footer>
 <script src="/Alrxu.github.io/jquery/jquery.min.js"></script>
    </div>
    <nav id="mobile-nav">
  
    <a href="/Alrxu.github.io/" class="mobile-nav-link">首页</a>
  
    <a href="/Alrxu.github.io/archives" class="mobile-nav-link">归档</a>
  
    <a href="/Alrxu.github.io/about" class="mobile-nav-link">关于</a>
  
</nav>
    <img class="back-to-top-btn" src="/images/fly-to-top.png">
<script>
// Elevator script included on the page, already.
window.onload = function() {
  var elevator = new Elevator({
    selector:'.back-to-top-btn',
    element: document.querySelector('.back-to-top-btn'),
    duration: 1000 // milliseconds
  });
}
</script>
      

  
    <script>
      var cloudTieConfig = {
        url: document.location.href, 
        sourceId: "",
        productKey: "e2fb4051c49842688ce669e634bc983f",
        target: "cloud-tie-wrapper"
      };
    </script>
    <script src="https://img1.ws.126.net/f2e/tie/yun/sdk/loader.js"></script>
    

  







<!-- author:forvoid begin -->
<!-- author:forvoid begin -->

<!-- author:forvoid end -->

<!-- author:forvoid end -->


  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      })
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      })
    </script>
    <script type="text/javascript" src="https://cdn.rawgit.com/mathjax/MathJax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


 <script src="/Alrxu.github.io/js/is.js"></script>


  <link rel="stylesheet" href="/Alrxu.github.io/fancybox/jquery.fancybox.css">
  <script src="/Alrxu.github.io/fancybox/jquery.fancybox.pack.js"></script>


<script src="/Alrxu.github.io/js/script.js"></script>
<script src="/Alrxu.github.io/js/elevator.js"></script>
  </div>
</body>
</html>